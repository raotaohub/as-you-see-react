{"version":3,"file":"react-reconciler-reflection.production.min.js","sources":["../../../../packages/shared/formatProdErrorMessage.js","../../../../packages/shared/ReactInstanceMap.js","../../../../packages/shared/ReactSharedInternals.js","../../../../packages/react-reconciler/src/ReactWorkTags.js","../../../../packages/react-reconciler/src/ReactFiberFlags.js","../../../../packages/react-reconciler/src/ReactFiberTreeReflection.js"],"sourcesContent":["/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n// Do not require this module directly! Use normal `invariant` calls with\r\n// template literal strings. The messages will be replaced with error codes\r\n// during build.\r\n\r\nfunction formatProdErrorMessage(code) {\r\n  let url = 'https://reactjs.org/docs/error-decoder.html?invariant=' + code;\r\n  for (let i = 1; i < arguments.length; i++) {\r\n    url += '&args[]=' + encodeURIComponent(arguments[i]);\r\n  }\r\n  return (\r\n    `Minified React error #${code}; visit ${url} for the full message or ` +\r\n    'use the non-minified dev environment for full errors and additional ' +\r\n    'helpful warnings.'\r\n  );\r\n}\r\n\r\nexport default formatProdErrorMessage;\r\n","/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\n/**\r\n * `ReactInstanceMap` maintains a mapping from a public facing stateful\r\n * instance (key) and the internal representation (value). This allows public\r\n * methods to accept the user facing instance as an argument and map them back\r\n * to internal methods.\r\n *\r\n * Note that this module is currently shared and assumed to be stateless.\r\n * If this becomes an actual Map, that will break.\r\n */\r\n\r\n/**\r\n * This API should be called `delete` but we'd have to make sure to always\r\n * transform these to strings for IE support. When this transform is fully\r\n * supported we can rename it.\r\n */\r\nexport function remove(key) {\r\n  key._reactInternals = undefined;\r\n}\r\n\r\nexport function get(key) {\r\n  return key._reactInternals;\r\n}\r\n\r\nexport function has(key) {\r\n  return key._reactInternals !== undefined;\r\n}\r\n\r\nexport function set(key, value) {\r\n  key._reactInternals = value;\r\n}\r\n","/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * @flow\r\n */\r\n\r\nimport * as React from 'react';\r\n\r\nconst ReactSharedInternals =\r\n  React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\r\n\r\nexport default ReactSharedInternals;\r\n","/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * @flow\r\n */\r\n\r\nexport type WorkTag =\r\n  | 0\r\n  | 1\r\n  | 2\r\n  | 3\r\n  | 4\r\n  | 5\r\n  | 6\r\n  | 7\r\n  | 8\r\n  | 9\r\n  | 10\r\n  | 11\r\n  | 12\r\n  | 13\r\n  | 14\r\n  | 15\r\n  | 16\r\n  | 17\r\n  | 18\r\n  | 19\r\n  | 20\r\n  | 21\r\n  | 22\r\n  | 23\r\n  | 24\r\n  | 25;\r\n\r\nexport const FunctionComponent = 0;\r\nexport const ClassComponent = 1;\r\nexport const IndeterminateComponent = 2; // Before we know whether it is function or class\r\nexport const HostRoot = 3; // Root of a host tree. Could be nested inside another node.\r\nexport const HostPortal = 4; // A subtree. Could be an entry point to a different renderer.\r\nexport const HostComponent = 5;\r\nexport const HostText = 6;\r\nexport const Fragment = 7;\r\nexport const Mode = 8;\r\nexport const ContextConsumer = 9;\r\nexport const ContextProvider = 10;\r\nexport const ForwardRef = 11;\r\nexport const Profiler = 12;\r\nexport const SuspenseComponent = 13;\r\nexport const MemoComponent = 14;\r\nexport const SimpleMemoComponent = 15;\r\nexport const LazyComponent = 16;\r\nexport const IncompleteClassComponent = 17;\r\nexport const DehydratedFragment = 18;\r\nexport const SuspenseListComponent = 19;\r\nexport const ScopeComponent = 21;\r\nexport const OffscreenComponent = 22;\r\nexport const LegacyHiddenComponent = 23;\r\nexport const CacheComponent = 24;\r\nexport const TracingMarkerComponent = 25;\r\n","/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * @flow\r\n */\r\n\r\nimport {enableCreateEventHandleAPI} from 'shared/ReactFeatureFlags';\r\n\r\nexport type Flags = number;\r\n\r\n// Don't change these two values. They're used by React Dev Tools.\r\nexport const NoFlags = /*                      */ 0b000000000000000000000000;\r\nexport const PerformedWork = /*                */ 0b000000000000000000000001;\r\n\r\n// You can change the rest (and add more).\r\nexport const Placement = /*                    */ 0b000000000000000000000010;\r\nexport const Update = /*                       */ 0b000000000000000000000100;\r\nexport const ChildDeletion = /*                */ 0b000000000000000000001000;\r\nexport const ContentReset = /*                 */ 0b000000000000000000010000;\r\nexport const Callback = /*                     */ 0b000000000000000000100000;\r\nexport const DidCapture = /*                   */ 0b000000000000000001000000;\r\nexport const ForceClientRender = /*            */ 0b000000000000000010000000;\r\nexport const Ref = /*                          */ 0b000000000000000100000000;\r\nexport const Snapshot = /*                     */ 0b000000000000001000000000;\r\nexport const Passive = /*                      */ 0b000000000000010000000000;\r\nexport const Hydrating = /*                    */ 0b000000000000100000000000;\r\nexport const Visibility = /*                   */ 0b000000000001000000000000;\r\nexport const StoreConsistency = /*             */ 0b000000000010000000000000;\r\n\r\nexport const LifecycleEffectMask =\r\n  Passive | Update | Callback | Ref | Snapshot | StoreConsistency;\r\n\r\n// Union of all commit flags (flags with the lifetime of a particular commit)\r\nexport const HostEffectMask = /*               */ 0b000000000011111111111111;\r\n\r\n// These are not really side effects, but we still reuse this field.\r\nexport const Incomplete = /*                   */ 0b000000000100000000000000;\r\nexport const ShouldCapture = /*                */ 0b000000001000000000000000;\r\nexport const ForceUpdateForLegacySuspense = /* */ 0b000000010000000000000000;\r\nexport const DidPropagateContext = /*          */ 0b000000100000000000000000;\r\nexport const NeedsPropagation = /*             */ 0b000001000000000000000000;\r\nexport const Forked = /*                       */ 0b000010000000000000000000;\r\n\r\n// Static tags describe aspects of a fiber that are not specific to a render,\r\n// e.g. a fiber uses a passive effect (even if there are no updates on this particular render).\r\n// This enables us to defer more work in the unmount case,\r\n// since we can defer traversing the tree during layout to look for Passive effects,\r\n// and instead rely on the static flag as a signal that there may be cleanup work.\r\nexport const RefStatic = /*                    */ 0b000100000000000000000000;\r\nexport const LayoutStatic = /*                 */ 0b001000000000000000000000;\r\nexport const PassiveStatic = /*                */ 0b010000000000000000000000;\r\n\r\n// Flag used to identify newly inserted fibers. It isn't reset after commit unlike `Placement`.\r\nexport const PlacementDEV = /*                 */ 0b100000000000000000000000;\r\n\r\n// Groups of flags that are used in the commit phase to skip over trees that\r\n// don't contain effects, by checking subtreeFlags.\r\n\r\nexport const BeforeMutationMask =\r\n  // TODO: Remove Update flag from before mutation phase by re-landing Visibility\r\n  // flag logic (see #20043)\r\n  Update |\r\n  Snapshot |\r\n  (enableCreateEventHandleAPI\r\n    ? // createEventHandle needs to visit deleted and hidden trees to\r\n      // fire beforeblur\r\n      // TODO: Only need to visit Deletions during BeforeMutation phase if an\r\n      // element is focused.\r\n      ChildDeletion | Visibility\r\n    : 0);\r\n\r\nexport const MutationMask =\r\n  Placement |\r\n  Update |\r\n  ChildDeletion |\r\n  ContentReset |\r\n  Ref |\r\n  Hydrating |\r\n  Visibility;\r\nexport const LayoutMask = Update | Callback | Ref | Visibility;\r\n\r\n// TODO: Split into PassiveMountMask and PassiveUnmountMask\r\nexport const PassiveMask = Passive | Visibility | ChildDeletion;\r\n\r\n// Union of tags that don't get reset on clones.\r\n// This allows certain concepts to persist without recalculating them,\r\n// e.g. whether a subtree contains passive effects or portals.\r\nexport const StaticMask = LayoutStatic | PassiveStatic | RefStatic;\r\n","/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * @flow\r\n */\r\n\r\nimport type {Fiber} from './ReactInternalTypes';\r\nimport type {Container, SuspenseInstance} from './ReactFiberHostConfig';\r\nimport type {SuspenseState} from './ReactFiberSuspenseComponent.old';\r\n\r\nimport {get as getInstance} from 'shared/ReactInstanceMap';\r\nimport ReactSharedInternals from 'shared/ReactSharedInternals';\r\nimport getComponentNameFromFiber from 'react-reconciler/src/getComponentNameFromFiber';\r\nimport {\r\n  ClassComponent,\r\n  HostComponent,\r\n  HostRoot,\r\n  HostPortal,\r\n  HostText,\r\n  SuspenseComponent,\r\n} from './ReactWorkTags';\r\nimport {NoFlags, Placement, Hydrating} from './ReactFiberFlags';\r\n\r\nconst ReactCurrentOwner = ReactSharedInternals.ReactCurrentOwner;\r\n\r\nexport function getNearestMountedFiber(fiber: Fiber): null | Fiber {\r\n  let node = fiber;\r\n  let nearestMounted = fiber;\r\n  if (!fiber.alternate) {\r\n    // If there is no alternate, this might be a new tree that isn't inserted\r\n    // yet. If it is, then it will have a pending insertion effect on it.\r\n    let nextNode = node;\r\n    do {\r\n      node = nextNode;\r\n      if ((node.flags & (Placement | Hydrating)) !== NoFlags) {\r\n        // This is an insertion or in-progress hydration. The nearest possible\r\n        // mounted fiber is the parent but we need to continue to figure out\r\n        // if that one is still mounted.\r\n        nearestMounted = node.return;\r\n      }\r\n      nextNode = node.return;\r\n    } while (nextNode);\r\n  } else {\r\n    while (node.return) {\r\n      node = node.return;\r\n    }\r\n  }\r\n  if (node.tag === HostRoot) {\r\n    // TODO: Check if this was a nested HostRoot when used with\r\n    // renderContainerIntoSubtree.\r\n    return nearestMounted;\r\n  }\r\n  // If we didn't hit the root, that means that we're in an disconnected tree\r\n  // that has been unmounted.\r\n  return null;\r\n}\r\n\r\nexport function getSuspenseInstanceFromFiber(\r\n  fiber: Fiber,\r\n): null | SuspenseInstance {\r\n  if (fiber.tag === SuspenseComponent) {\r\n    let suspenseState: SuspenseState | null = fiber.memoizedState;\r\n    if (suspenseState === null) {\r\n      const current = fiber.alternate;\r\n      if (current !== null) {\r\n        suspenseState = current.memoizedState;\r\n      }\r\n    }\r\n    if (suspenseState !== null) {\r\n      return suspenseState.dehydrated;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function getContainerFromFiber(fiber: Fiber): null | Container {\r\n  return fiber.tag === HostRoot\r\n    ? (fiber.stateNode.containerInfo: Container)\r\n    : null;\r\n}\r\n\r\nexport function isFiberMounted(fiber: Fiber): boolean {\r\n  return getNearestMountedFiber(fiber) === fiber;\r\n}\r\n\r\nexport function isMounted(component: React$Component<any, any>): boolean {\r\n  if (__DEV__) {\r\n    const owner = (ReactCurrentOwner.current: any);\r\n    if (owner !== null && owner.tag === ClassComponent) {\r\n      const ownerFiber: Fiber = owner;\r\n      const instance = ownerFiber.stateNode;\r\n      if (!instance._warnedAboutRefsInRender) {\r\n        console.error(\r\n          '%s is accessing isMounted inside its render() function. ' +\r\n            'render() should be a pure function of props and state. It should ' +\r\n            'never access something that requires stale data from the previous ' +\r\n            'render, such as refs. Move this logic to componentDidMount and ' +\r\n            'componentDidUpdate instead.',\r\n          getComponentNameFromFiber(ownerFiber) || 'A component',\r\n        );\r\n      }\r\n      instance._warnedAboutRefsInRender = true;\r\n    }\r\n  }\r\n\r\n  const fiber: ?Fiber = getInstance(component);\r\n  if (!fiber) {\r\n    return false;\r\n  }\r\n  return getNearestMountedFiber(fiber) === fiber;\r\n}\r\n\r\nfunction assertIsMounted(fiber) {\r\n  if (getNearestMountedFiber(fiber) !== fiber) {\r\n    throw new Error('Unable to find node on an unmounted component.');\r\n  }\r\n}\r\n\r\nexport function findCurrentFiberUsingSlowPath(fiber: Fiber): Fiber | null {\r\n  const alternate = fiber.alternate;\r\n  if (!alternate) {\r\n    // If there is no alternate, then we only need to check if it is mounted.\r\n    const nearestMounted = getNearestMountedFiber(fiber);\r\n\r\n    if (nearestMounted === null) {\r\n      throw new Error('Unable to find node on an unmounted component.');\r\n    }\r\n\r\n    if (nearestMounted !== fiber) {\r\n      return null;\r\n    }\r\n    return fiber;\r\n  }\r\n  // If we have two possible branches, we'll walk backwards up to the root\r\n  // to see what path the root points to. On the way we may hit one of the\r\n  // special cases and we'll deal with them.\r\n  let a: Fiber = fiber;\r\n  let b: Fiber = alternate;\r\n  while (true) {\r\n    const parentA = a.return;\r\n    if (parentA === null) {\r\n      // We're at the root.\r\n      break;\r\n    }\r\n    const parentB = parentA.alternate;\r\n    if (parentB === null) {\r\n      // There is no alternate. This is an unusual case. Currently, it only\r\n      // happens when a Suspense component is hidden. An extra fragment fiber\r\n      // is inserted in between the Suspense fiber and its children. Skip\r\n      // over this extra fragment fiber and proceed to the next parent.\r\n      const nextParent = parentA.return;\r\n      if (nextParent !== null) {\r\n        a = b = nextParent;\r\n        continue;\r\n      }\r\n      // If there's no parent, we're at the root.\r\n      break;\r\n    }\r\n\r\n    // If both copies of the parent fiber point to the same child, we can\r\n    // assume that the child is current. This happens when we bailout on low\r\n    // priority: the bailed out fiber's child reuses the current child.\r\n    if (parentA.child === parentB.child) {\r\n      let child = parentA.child;\r\n      while (child) {\r\n        if (child === a) {\r\n          // We've determined that A is the current branch.\r\n          assertIsMounted(parentA);\r\n          return fiber;\r\n        }\r\n        if (child === b) {\r\n          // We've determined that B is the current branch.\r\n          assertIsMounted(parentA);\r\n          return alternate;\r\n        }\r\n        child = child.sibling;\r\n      }\r\n\r\n      // We should never have an alternate for any mounting node. So the only\r\n      // way this could possibly happen is if this was unmounted, if at all.\r\n      throw new Error('Unable to find node on an unmounted component.');\r\n    }\r\n\r\n    if (a.return !== b.return) {\r\n      // The return pointer of A and the return pointer of B point to different\r\n      // fibers. We assume that return pointers never criss-cross, so A must\r\n      // belong to the child set of A.return, and B must belong to the child\r\n      // set of B.return.\r\n      a = parentA;\r\n      b = parentB;\r\n    } else {\r\n      // The return pointers point to the same fiber. We'll have to use the\r\n      // default, slow path: scan the child sets of each parent alternate to see\r\n      // which child belongs to which set.\r\n      //\r\n      // Search parent A's child set\r\n      let didFindChild = false;\r\n      let child = parentA.child;\r\n      while (child) {\r\n        if (child === a) {\r\n          didFindChild = true;\r\n          a = parentA;\r\n          b = parentB;\r\n          break;\r\n        }\r\n        if (child === b) {\r\n          didFindChild = true;\r\n          b = parentA;\r\n          a = parentB;\r\n          break;\r\n        }\r\n        child = child.sibling;\r\n      }\r\n      if (!didFindChild) {\r\n        // Search parent B's child set\r\n        child = parentB.child;\r\n        while (child) {\r\n          if (child === a) {\r\n            didFindChild = true;\r\n            a = parentB;\r\n            b = parentA;\r\n            break;\r\n          }\r\n          if (child === b) {\r\n            didFindChild = true;\r\n            b = parentB;\r\n            a = parentA;\r\n            break;\r\n          }\r\n          child = child.sibling;\r\n        }\r\n\r\n        if (!didFindChild) {\r\n          throw new Error(\r\n            'Child was not found in either parent set. This indicates a bug ' +\r\n              'in React related to the return pointer. Please file an issue.',\r\n          );\r\n        }\r\n      }\r\n    }\r\n\r\n    if (a.alternate !== b) {\r\n      throw new Error(\r\n        \"Return fibers should always be each others' alternates. \" +\r\n          'This error is likely caused by a bug in React. Please file an issue.',\r\n      );\r\n    }\r\n  }\r\n\r\n  // If the root is not a host container, we're in a disconnected tree. I.e.\r\n  // unmounted.\r\n  if (a.tag !== HostRoot) {\r\n    throw new Error('Unable to find node on an unmounted component.');\r\n  }\r\n\r\n  if (a.stateNode.current === a) {\r\n    // We've determined that A is the current branch.\r\n    return fiber;\r\n  }\r\n  // Otherwise B has to be current branch.\r\n  return alternate;\r\n}\r\n\r\nexport function findCurrentHostFiber(parent: Fiber): Fiber | null {\r\n  const currentParent = findCurrentFiberUsingSlowPath(parent);\r\n  return currentParent !== null\r\n    ? findCurrentHostFiberImpl(currentParent)\r\n    : null;\r\n}\r\n\r\nfunction findCurrentHostFiberImpl(node: Fiber) {\r\n  // Next we'll drill down this component to find the first HostComponent/Text.\r\n  if (node.tag === HostComponent || node.tag === HostText) {\r\n    return node;\r\n  }\r\n\r\n  let child = node.child;\r\n  while (child !== null) {\r\n    const match = findCurrentHostFiberImpl(child);\r\n    if (match !== null) {\r\n      return match;\r\n    }\r\n    child = child.sibling;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport function findCurrentHostFiberWithNoPortals(parent: Fiber): Fiber | null {\r\n  const currentParent = findCurrentFiberUsingSlowPath(parent);\r\n  return currentParent !== null\r\n    ? findCurrentHostFiberWithNoPortalsImpl(currentParent)\r\n    : null;\r\n}\r\n\r\nfunction findCurrentHostFiberWithNoPortalsImpl(node: Fiber) {\r\n  // Next we'll drill down this component to find the first HostComponent/Text.\r\n  if (node.tag === HostComponent || node.tag === HostText) {\r\n    return node;\r\n  }\r\n\r\n  let child = node.child;\r\n  while (child !== null) {\r\n    if (child.tag !== HostPortal) {\r\n      const match = findCurrentHostFiberWithNoPortalsImpl(child);\r\n      if (match !== null) {\r\n        return match;\r\n      }\r\n    }\r\n    child = child.sibling;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport function isFiberSuspenseAndTimedOut(fiber: Fiber): boolean {\r\n  const memoizedState = fiber.memoizedState;\r\n  return (\r\n    fiber.tag === SuspenseComponent &&\r\n    memoizedState !== null &&\r\n    memoizedState.dehydrated === null\r\n  );\r\n}\r\n\r\nexport function doesFiberContain(\r\n  parentFiber: Fiber,\r\n  childFiber: Fiber,\r\n): boolean {\r\n  let node = childFiber;\r\n  const parentFiberAlternate = parentFiber.alternate;\r\n  while (node !== null) {\r\n    if (node === parentFiber || node === parentFiberAlternate) {\r\n      return true;\r\n    }\r\n    node = node.return;\r\n  }\r\n  return false;\r\n}\r\n"],"names":["formatProdErrorMessage","code","url","i","arguments","length","encodeURIComponent","get","key","_reactInternals","ReactSharedInternals","React","HostRoot","HostPortal","HostComponent","HostText","SuspenseComponent","NoFlags","Placement","Hydrating","ReactCurrentOwner","getNearestMountedFiber","fiber","node","nearestMounted","alternate","nextNode","flags","return","tag","getSuspenseInstanceFromFiber","suspenseState","memoizedState","current","dehydrated","getContainerFromFiber","stateNode","containerInfo","isFiberMounted","isMounted","component","getInstance","assertIsMounted","findCurrentFiberUsingSlowPath","a","b","parentA","parentB","nextParent","child","sibling","didFindChild","findCurrentHostFiber","parent","currentParent","findCurrentHostFiberImpl","match","findCurrentHostFiberWithNoPortals","findCurrentHostFiberWithNoPortalsImpl","isFiberSuspenseAndTimedOut","doesFiberContain","parentFiber","childFiber","parentFiberAlternate"],"mappings":"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"}