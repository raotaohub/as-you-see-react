{"version":3,"file":"react-dom-test-utils.development.js","sources":["../../../../packages/shared/ReactSharedInternals.js","../../../../packages/shared/consoleWithStackDev.js","../../../../packages/shared/ReactInstanceMap.js","../../../../packages/react-reconciler/src/ReactWorkTags.js","../../../../packages/react-reconciler/src/ReactFiberFlags.js","../../../../packages/react-reconciler/src/ReactFiberTreeReflection.js","../../../../packages/shared/assign.js","../../../../packages/react-dom/src/events/getEventCharCode.js","../../../../packages/react-dom/src/events/SyntheticEvent.js","../../../../packages/react-dom/src/shared/HTMLNodeType.js","../../../../packages/shared/invokeGuardedCallbackImpl.js","../../../../packages/shared/ReactErrorUtils.js","../../../../packages/shared/isArray.js","../../../../packages/react-dom/src/test-utils/ReactTestUtils.js"],"sourcesContent":["/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * @flow\r\n */\r\n\r\nimport * as React from 'react';\r\n\r\nconst ReactSharedInternals =\r\n  React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\r\n\r\nexport default ReactSharedInternals;\r\n","/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport ReactSharedInternals from 'shared/ReactSharedInternals';\r\n\r\nlet suppressWarning = false;\r\nexport function setSuppressWarning(newSuppressWarning) {\r\n  if (__DEV__) {\r\n    suppressWarning = newSuppressWarning;\r\n  }\r\n}\r\n\r\n// In DEV, calls to console.warn and console.error get replaced\r\n// by calls to these methods by a Babel plugin.\r\n//\r\n// In PROD (or in packages without access to React internals),\r\n// they are left as they are instead.\r\n\r\nexport function warn(format, ...args) {\r\n  if (__DEV__) {\r\n    if (!suppressWarning) {\r\n      printWarning('warn', format, args);\r\n    }\r\n  }\r\n}\r\n\r\nexport function error(format, ...args) {\r\n  if (__DEV__) {\r\n    if (!suppressWarning) {\r\n      printWarning('error', format, args);\r\n    }\r\n  }\r\n}\r\n\r\nfunction printWarning(level, format, args) {\r\n  // When changing this logic, you might want to also\r\n  // update consoleWithStackDev.www.js as well.\r\n  if (__DEV__) {\r\n    const ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\r\n    const stack = ReactDebugCurrentFrame.getStackAddendum();\r\n    if (stack !== '') {\r\n      format += '%s';\r\n      args = args.concat([stack]);\r\n    }\r\n\r\n    // eslint-disable-next-line react-internal/safe-string-coercion\r\n    const argsWithFormat = args.map(item => String(item));\r\n    // Careful: RN currently depends on this prefix\r\n    argsWithFormat.unshift('Warning: ' + format);\r\n    // We intentionally don't use spread (or .apply) directly because it\r\n    // breaks IE9: https://github.com/facebook/react/issues/13610\r\n    // eslint-disable-next-line react-internal/no-production-logging\r\n    Function.prototype.apply.call(console[level], console, argsWithFormat);\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\n/**\r\n * `ReactInstanceMap` maintains a mapping from a public facing stateful\r\n * instance (key) and the internal representation (value). This allows public\r\n * methods to accept the user facing instance as an argument and map them back\r\n * to internal methods.\r\n *\r\n * Note that this module is currently shared and assumed to be stateless.\r\n * If this becomes an actual Map, that will break.\r\n */\r\n\r\n/**\r\n * This API should be called `delete` but we'd have to make sure to always\r\n * transform these to strings for IE support. When this transform is fully\r\n * supported we can rename it.\r\n */\r\nexport function remove(key) {\r\n  key._reactInternals = undefined;\r\n}\r\n\r\nexport function get(key) {\r\n  return key._reactInternals;\r\n}\r\n\r\nexport function has(key) {\r\n  return key._reactInternals !== undefined;\r\n}\r\n\r\nexport function set(key, value) {\r\n  key._reactInternals = value;\r\n}\r\n","/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * @flow\r\n */\r\n\r\nexport type WorkTag =\r\n  | 0\r\n  | 1\r\n  | 2\r\n  | 3\r\n  | 4\r\n  | 5\r\n  | 6\r\n  | 7\r\n  | 8\r\n  | 9\r\n  | 10\r\n  | 11\r\n  | 12\r\n  | 13\r\n  | 14\r\n  | 15\r\n  | 16\r\n  | 17\r\n  | 18\r\n  | 19\r\n  | 20\r\n  | 21\r\n  | 22\r\n  | 23\r\n  | 24\r\n  | 25;\r\n\r\nexport const FunctionComponent = 0;\r\nexport const ClassComponent = 1;\r\nexport const IndeterminateComponent = 2; // Before we know whether it is function or class\r\nexport const HostRoot = 3; // Root of a host tree. Could be nested inside another node.\r\nexport const HostPortal = 4; // A subtree. Could be an entry point to a different renderer.\r\nexport const HostComponent = 5;\r\nexport const HostText = 6;\r\nexport const Fragment = 7;\r\nexport const Mode = 8;\r\nexport const ContextConsumer = 9;\r\nexport const ContextProvider = 10;\r\nexport const ForwardRef = 11;\r\nexport const Profiler = 12;\r\nexport const SuspenseComponent = 13;\r\nexport const MemoComponent = 14;\r\nexport const SimpleMemoComponent = 15;\r\nexport const LazyComponent = 16;\r\nexport const IncompleteClassComponent = 17;\r\nexport const DehydratedFragment = 18;\r\nexport const SuspenseListComponent = 19;\r\nexport const ScopeComponent = 21;\r\nexport const OffscreenComponent = 22;\r\nexport const LegacyHiddenComponent = 23;\r\nexport const CacheComponent = 24;\r\nexport const TracingMarkerComponent = 25;\r\n","/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * @flow\r\n */\r\n\r\nimport {enableCreateEventHandleAPI} from 'shared/ReactFeatureFlags';\r\n\r\nexport type Flags = number;\r\n\r\n// Don't change these two values. They're used by React Dev Tools.\r\nexport const NoFlags = /*                      */ 0b000000000000000000000000;\r\nexport const PerformedWork = /*                */ 0b000000000000000000000001;\r\n\r\n// You can change the rest (and add more).\r\nexport const Placement = /*                    */ 0b000000000000000000000010;\r\nexport const Update = /*                       */ 0b000000000000000000000100;\r\nexport const ChildDeletion = /*                */ 0b000000000000000000001000;\r\nexport const ContentReset = /*                 */ 0b000000000000000000010000;\r\nexport const Callback = /*                     */ 0b000000000000000000100000;\r\nexport const DidCapture = /*                   */ 0b000000000000000001000000;\r\nexport const ForceClientRender = /*            */ 0b000000000000000010000000;\r\nexport const Ref = /*                          */ 0b000000000000000100000000;\r\nexport const Snapshot = /*                     */ 0b000000000000001000000000;\r\nexport const Passive = /*                      */ 0b000000000000010000000000;\r\nexport const Hydrating = /*                    */ 0b000000000000100000000000;\r\nexport const Visibility = /*                   */ 0b000000000001000000000000;\r\nexport const StoreConsistency = /*             */ 0b000000000010000000000000;\r\n\r\nexport const LifecycleEffectMask =\r\n  Passive | Update | Callback | Ref | Snapshot | StoreConsistency;\r\n\r\n// Union of all commit flags (flags with the lifetime of a particular commit)\r\nexport const HostEffectMask = /*               */ 0b000000000011111111111111;\r\n\r\n// These are not really side effects, but we still reuse this field.\r\nexport const Incomplete = /*                   */ 0b000000000100000000000000;\r\nexport const ShouldCapture = /*                */ 0b000000001000000000000000;\r\nexport const ForceUpdateForLegacySuspense = /* */ 0b000000010000000000000000;\r\nexport const DidPropagateContext = /*          */ 0b000000100000000000000000;\r\nexport const NeedsPropagation = /*             */ 0b000001000000000000000000;\r\nexport const Forked = /*                       */ 0b000010000000000000000000;\r\n\r\n// Static tags describe aspects of a fiber that are not specific to a render,\r\n// e.g. a fiber uses a passive effect (even if there are no updates on this particular render).\r\n// This enables us to defer more work in the unmount case,\r\n// since we can defer traversing the tree during layout to look for Passive effects,\r\n// and instead rely on the static flag as a signal that there may be cleanup work.\r\nexport const RefStatic = /*                    */ 0b000100000000000000000000;\r\nexport const LayoutStatic = /*                 */ 0b001000000000000000000000;\r\nexport const PassiveStatic = /*                */ 0b010000000000000000000000;\r\n\r\n// Flag used to identify newly inserted fibers. It isn't reset after commit unlike `Placement`.\r\nexport const PlacementDEV = /*                 */ 0b100000000000000000000000;\r\n\r\n// Groups of flags that are used in the commit phase to skip over trees that\r\n// don't contain effects, by checking subtreeFlags.\r\n\r\nexport const BeforeMutationMask =\r\n  // TODO: Remove Update flag from before mutation phase by re-landing Visibility\r\n  // flag logic (see #20043)\r\n  Update |\r\n  Snapshot |\r\n  (enableCreateEventHandleAPI\r\n    ? // createEventHandle needs to visit deleted and hidden trees to\r\n      // fire beforeblur\r\n      // TODO: Only need to visit Deletions during BeforeMutation phase if an\r\n      // element is focused.\r\n      ChildDeletion | Visibility\r\n    : 0);\r\n\r\nexport const MutationMask =\r\n  Placement |\r\n  Update |\r\n  ChildDeletion |\r\n  ContentReset |\r\n  Ref |\r\n  Hydrating |\r\n  Visibility;\r\nexport const LayoutMask = Update | Callback | Ref | Visibility;\r\n\r\n// TODO: Split into PassiveMountMask and PassiveUnmountMask\r\nexport const PassiveMask = Passive | Visibility | ChildDeletion;\r\n\r\n// Union of tags that don't get reset on clones.\r\n// This allows certain concepts to persist without recalculating them,\r\n// e.g. whether a subtree contains passive effects or portals.\r\nexport const StaticMask = LayoutStatic | PassiveStatic | RefStatic;\r\n","/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * @flow\r\n */\r\n\r\nimport type {Fiber} from './ReactInternalTypes';\r\nimport type {Container, SuspenseInstance} from './ReactFiberHostConfig';\r\nimport type {SuspenseState} from './ReactFiberSuspenseComponent.old';\r\n\r\nimport {get as getInstance} from 'shared/ReactInstanceMap';\r\nimport ReactSharedInternals from 'shared/ReactSharedInternals';\r\nimport getComponentNameFromFiber from 'react-reconciler/src/getComponentNameFromFiber';\r\nimport {\r\n  ClassComponent,\r\n  HostComponent,\r\n  HostRoot,\r\n  HostPortal,\r\n  HostText,\r\n  SuspenseComponent,\r\n} from './ReactWorkTags';\r\nimport {NoFlags, Placement, Hydrating} from './ReactFiberFlags';\r\n\r\nconst ReactCurrentOwner = ReactSharedInternals.ReactCurrentOwner;\r\n\r\nexport function getNearestMountedFiber(fiber: Fiber): null | Fiber {\r\n  let node = fiber;\r\n  let nearestMounted = fiber;\r\n  if (!fiber.alternate) {\r\n    // If there is no alternate, this might be a new tree that isn't inserted\r\n    // yet. If it is, then it will have a pending insertion effect on it.\r\n    let nextNode = node;\r\n    do {\r\n      node = nextNode;\r\n      if ((node.flags & (Placement | Hydrating)) !== NoFlags) {\r\n        // This is an insertion or in-progress hydration. The nearest possible\r\n        // mounted fiber is the parent but we need to continue to figure out\r\n        // if that one is still mounted.\r\n        nearestMounted = node.return;\r\n      }\r\n      nextNode = node.return;\r\n    } while (nextNode);\r\n  } else {\r\n    while (node.return) {\r\n      node = node.return;\r\n    }\r\n  }\r\n  if (node.tag === HostRoot) {\r\n    // TODO: Check if this was a nested HostRoot when used with\r\n    // renderContainerIntoSubtree.\r\n    return nearestMounted;\r\n  }\r\n  // If we didn't hit the root, that means that we're in an disconnected tree\r\n  // that has been unmounted.\r\n  return null;\r\n}\r\n\r\nexport function getSuspenseInstanceFromFiber(\r\n  fiber: Fiber,\r\n): null | SuspenseInstance {\r\n  if (fiber.tag === SuspenseComponent) {\r\n    let suspenseState: SuspenseState | null = fiber.memoizedState;\r\n    if (suspenseState === null) {\r\n      const current = fiber.alternate;\r\n      if (current !== null) {\r\n        suspenseState = current.memoizedState;\r\n      }\r\n    }\r\n    if (suspenseState !== null) {\r\n      return suspenseState.dehydrated;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function getContainerFromFiber(fiber: Fiber): null | Container {\r\n  return fiber.tag === HostRoot\r\n    ? (fiber.stateNode.containerInfo: Container)\r\n    : null;\r\n}\r\n\r\nexport function isFiberMounted(fiber: Fiber): boolean {\r\n  return getNearestMountedFiber(fiber) === fiber;\r\n}\r\n\r\nexport function isMounted(component: React$Component<any, any>): boolean {\r\n  if (__DEV__) {\r\n    const owner = (ReactCurrentOwner.current: any);\r\n    if (owner !== null && owner.tag === ClassComponent) {\r\n      const ownerFiber: Fiber = owner;\r\n      const instance = ownerFiber.stateNode;\r\n      if (!instance._warnedAboutRefsInRender) {\r\n        console.error(\r\n          '%s is accessing isMounted inside its render() function. ' +\r\n            'render() should be a pure function of props and state. It should ' +\r\n            'never access something that requires stale data from the previous ' +\r\n            'render, such as refs. Move this logic to componentDidMount and ' +\r\n            'componentDidUpdate instead.',\r\n          getComponentNameFromFiber(ownerFiber) || 'A component',\r\n        );\r\n      }\r\n      instance._warnedAboutRefsInRender = true;\r\n    }\r\n  }\r\n\r\n  const fiber: ?Fiber = getInstance(component);\r\n  if (!fiber) {\r\n    return false;\r\n  }\r\n  return getNearestMountedFiber(fiber) === fiber;\r\n}\r\n\r\nfunction assertIsMounted(fiber) {\r\n  if (getNearestMountedFiber(fiber) !== fiber) {\r\n    throw new Error('Unable to find node on an unmounted component.');\r\n  }\r\n}\r\n\r\nexport function findCurrentFiberUsingSlowPath(fiber: Fiber): Fiber | null {\r\n  const alternate = fiber.alternate;\r\n  if (!alternate) {\r\n    // If there is no alternate, then we only need to check if it is mounted.\r\n    const nearestMounted = getNearestMountedFiber(fiber);\r\n\r\n    if (nearestMounted === null) {\r\n      throw new Error('Unable to find node on an unmounted component.');\r\n    }\r\n\r\n    if (nearestMounted !== fiber) {\r\n      return null;\r\n    }\r\n    return fiber;\r\n  }\r\n  // If we have two possible branches, we'll walk backwards up to the root\r\n  // to see what path the root points to. On the way we may hit one of the\r\n  // special cases and we'll deal with them.\r\n  let a: Fiber = fiber;\r\n  let b: Fiber = alternate;\r\n  while (true) {\r\n    const parentA = a.return;\r\n    if (parentA === null) {\r\n      // We're at the root.\r\n      break;\r\n    }\r\n    const parentB = parentA.alternate;\r\n    if (parentB === null) {\r\n      // There is no alternate. This is an unusual case. Currently, it only\r\n      // happens when a Suspense component is hidden. An extra fragment fiber\r\n      // is inserted in between the Suspense fiber and its children. Skip\r\n      // over this extra fragment fiber and proceed to the next parent.\r\n      const nextParent = parentA.return;\r\n      if (nextParent !== null) {\r\n        a = b = nextParent;\r\n        continue;\r\n      }\r\n      // If there's no parent, we're at the root.\r\n      break;\r\n    }\r\n\r\n    // If both copies of the parent fiber point to the same child, we can\r\n    // assume that the child is current. This happens when we bailout on low\r\n    // priority: the bailed out fiber's child reuses the current child.\r\n    if (parentA.child === parentB.child) {\r\n      let child = parentA.child;\r\n      while (child) {\r\n        if (child === a) {\r\n          // We've determined that A is the current branch.\r\n          assertIsMounted(parentA);\r\n          return fiber;\r\n        }\r\n        if (child === b) {\r\n          // We've determined that B is the current branch.\r\n          assertIsMounted(parentA);\r\n          return alternate;\r\n        }\r\n        child = child.sibling;\r\n      }\r\n\r\n      // We should never have an alternate for any mounting node. So the only\r\n      // way this could possibly happen is if this was unmounted, if at all.\r\n      throw new Error('Unable to find node on an unmounted component.');\r\n    }\r\n\r\n    if (a.return !== b.return) {\r\n      // The return pointer of A and the return pointer of B point to different\r\n      // fibers. We assume that return pointers never criss-cross, so A must\r\n      // belong to the child set of A.return, and B must belong to the child\r\n      // set of B.return.\r\n      a = parentA;\r\n      b = parentB;\r\n    } else {\r\n      // The return pointers point to the same fiber. We'll have to use the\r\n      // default, slow path: scan the child sets of each parent alternate to see\r\n      // which child belongs to which set.\r\n      //\r\n      // Search parent A's child set\r\n      let didFindChild = false;\r\n      let child = parentA.child;\r\n      while (child) {\r\n        if (child === a) {\r\n          didFindChild = true;\r\n          a = parentA;\r\n          b = parentB;\r\n          break;\r\n        }\r\n        if (child === b) {\r\n          didFindChild = true;\r\n          b = parentA;\r\n          a = parentB;\r\n          break;\r\n        }\r\n        child = child.sibling;\r\n      }\r\n      if (!didFindChild) {\r\n        // Search parent B's child set\r\n        child = parentB.child;\r\n        while (child) {\r\n          if (child === a) {\r\n            didFindChild = true;\r\n            a = parentB;\r\n            b = parentA;\r\n            break;\r\n          }\r\n          if (child === b) {\r\n            didFindChild = true;\r\n            b = parentB;\r\n            a = parentA;\r\n            break;\r\n          }\r\n          child = child.sibling;\r\n        }\r\n\r\n        if (!didFindChild) {\r\n          throw new Error(\r\n            'Child was not found in either parent set. This indicates a bug ' +\r\n              'in React related to the return pointer. Please file an issue.',\r\n          );\r\n        }\r\n      }\r\n    }\r\n\r\n    if (a.alternate !== b) {\r\n      throw new Error(\r\n        \"Return fibers should always be each others' alternates. \" +\r\n          'This error is likely caused by a bug in React. Please file an issue.',\r\n      );\r\n    }\r\n  }\r\n\r\n  // If the root is not a host container, we're in a disconnected tree. I.e.\r\n  // unmounted.\r\n  if (a.tag !== HostRoot) {\r\n    throw new Error('Unable to find node on an unmounted component.');\r\n  }\r\n\r\n  if (a.stateNode.current === a) {\r\n    // We've determined that A is the current branch.\r\n    return fiber;\r\n  }\r\n  // Otherwise B has to be current branch.\r\n  return alternate;\r\n}\r\n\r\nexport function findCurrentHostFiber(parent: Fiber): Fiber | null {\r\n  const currentParent = findCurrentFiberUsingSlowPath(parent);\r\n  return currentParent !== null\r\n    ? findCurrentHostFiberImpl(currentParent)\r\n    : null;\r\n}\r\n\r\nfunction findCurrentHostFiberImpl(node: Fiber) {\r\n  // Next we'll drill down this component to find the first HostComponent/Text.\r\n  if (node.tag === HostComponent || node.tag === HostText) {\r\n    return node;\r\n  }\r\n\r\n  let child = node.child;\r\n  while (child !== null) {\r\n    const match = findCurrentHostFiberImpl(child);\r\n    if (match !== null) {\r\n      return match;\r\n    }\r\n    child = child.sibling;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport function findCurrentHostFiberWithNoPortals(parent: Fiber): Fiber | null {\r\n  const currentParent = findCurrentFiberUsingSlowPath(parent);\r\n  return currentParent !== null\r\n    ? findCurrentHostFiberWithNoPortalsImpl(currentParent)\r\n    : null;\r\n}\r\n\r\nfunction findCurrentHostFiberWithNoPortalsImpl(node: Fiber) {\r\n  // Next we'll drill down this component to find the first HostComponent/Text.\r\n  if (node.tag === HostComponent || node.tag === HostText) {\r\n    return node;\r\n  }\r\n\r\n  let child = node.child;\r\n  while (child !== null) {\r\n    if (child.tag !== HostPortal) {\r\n      const match = findCurrentHostFiberWithNoPortalsImpl(child);\r\n      if (match !== null) {\r\n        return match;\r\n      }\r\n    }\r\n    child = child.sibling;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport function isFiberSuspenseAndTimedOut(fiber: Fiber): boolean {\r\n  const memoizedState = fiber.memoizedState;\r\n  return (\r\n    fiber.tag === SuspenseComponent &&\r\n    memoizedState !== null &&\r\n    memoizedState.dehydrated === null\r\n  );\r\n}\r\n\r\nexport function doesFiberContain(\r\n  parentFiber: Fiber,\r\n  childFiber: Fiber,\r\n): boolean {\r\n  let node = childFiber;\r\n  const parentFiberAlternate = parentFiber.alternate;\r\n  while (node !== null) {\r\n    if (node === parentFiber || node === parentFiberAlternate) {\r\n      return true;\r\n    }\r\n    node = node.return;\r\n  }\r\n  return false;\r\n}\r\n","/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * @flow\r\n */\r\n\r\nconst assign = Object.assign;\r\n\r\nexport default assign;\r\n","/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * @flow\r\n */\r\n\r\n/**\r\n * `charCode` represents the actual \"character code\" and is safe to use with\r\n * `String.fromCharCode`. As such, only keys that correspond to printable\r\n * characters produce a valid `charCode`, the only exception to this is Enter.\r\n * The Tab-key is considered non-printable and does not have a `charCode`,\r\n * presumably because it does not produce a tab-character in browsers.\r\n *\r\n * @param {object} nativeEvent Native browser event.\r\n * @return {number} Normalized `charCode` property.\r\n */\r\nfunction getEventCharCode(nativeEvent: KeyboardEvent): number {\r\n  let charCode;\r\n  const keyCode = nativeEvent.keyCode;\r\n\r\n  if ('charCode' in nativeEvent) {\r\n    charCode = nativeEvent.charCode;\r\n\r\n    // FF does not set `charCode` for the Enter-key, check against `keyCode`.\r\n    if (charCode === 0 && keyCode === 13) {\r\n      charCode = 13;\r\n    }\r\n  } else {\r\n    // IE8 does not implement `charCode`, but `keyCode` has the correct value.\r\n    charCode = keyCode;\r\n  }\r\n\r\n  // IE and Edge (on Windows) and Chrome / Safari (on Windows and Linux)\r\n  // report Enter as charCode 10 when ctrl is pressed.\r\n  if (charCode === 10) {\r\n    charCode = 13;\r\n  }\r\n\r\n  // Some non-printable keys are reported in `charCode`/`keyCode`, discard them.\r\n  // Must not discard the (non-)printable Enter-key.\r\n  if (charCode >= 32 || charCode === 13) {\r\n    return charCode;\r\n  }\r\n\r\n  return 0;\r\n}\r\n\r\nexport default getEventCharCode;\r\n","/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * @flow\r\n */\r\n\r\n/* eslint valid-typeof: 0 */\r\n\r\nimport type {Fiber} from 'react-reconciler/src/ReactInternalTypes';\r\n\r\nimport assign from 'shared/assign';\r\nimport getEventCharCode from './getEventCharCode';\r\n\r\ntype EventInterfaceType = {\r\n  [propName: string]: 0 | ((event: {[propName: string]: mixed, ...}) => mixed),\r\n  ...,\r\n};\r\n\r\nfunction functionThatReturnsTrue() {\r\n  return true;\r\n}\r\n\r\nfunction functionThatReturnsFalse() {\r\n  return false;\r\n}\r\n\r\n// This is intentionally a factory so that we have different returned constructors.\r\n// If we had a single constructor, it would be megamorphic and engines would deopt.\r\nfunction createSyntheticEvent(Interface: EventInterfaceType) {\r\n  /**\r\n   * Synthetic events are dispatched by event plugins, typically in response to a\r\n   * top-level event delegation handler.\r\n   *\r\n   * These systems should generally use pooling to reduce the frequency of garbage\r\n   * collection. The system should check `isPersistent` to determine whether the\r\n   * event should be released into the pool after being dispatched. Users that\r\n   * need a persisted event should invoke `persist`.\r\n   *\r\n   * Synthetic events (and subclasses) implement the DOM Level 3 Events API by\r\n   * normalizing browser quirks. Subclasses do not necessarily have to implement a\r\n   * DOM interface; custom application-specific events can also subclass this.\r\n   */\r\n  function SyntheticBaseEvent(\r\n    reactName: string | null,\r\n    reactEventType: string,\r\n    targetInst: Fiber | null,\r\n    nativeEvent: {[propName: string]: mixed, ...},\r\n    nativeEventTarget: null | EventTarget,\r\n  ) {\r\n    this._reactName = reactName;\r\n    this._targetInst = targetInst;\r\n    this.type = reactEventType;\r\n    this.nativeEvent = nativeEvent;\r\n    this.target = nativeEventTarget;\r\n    this.currentTarget = null;\r\n\r\n    for (const propName in Interface) {\r\n      if (!Interface.hasOwnProperty(propName)) {\r\n        continue;\r\n      }\r\n      const normalize = Interface[propName];\r\n      if (normalize) {\r\n        this[propName] = normalize(nativeEvent);\r\n      } else {\r\n        this[propName] = nativeEvent[propName];\r\n      }\r\n    }\r\n\r\n    const defaultPrevented =\r\n      nativeEvent.defaultPrevented != null\r\n        ? nativeEvent.defaultPrevented\r\n        : nativeEvent.returnValue === false;\r\n    if (defaultPrevented) {\r\n      this.isDefaultPrevented = functionThatReturnsTrue;\r\n    } else {\r\n      this.isDefaultPrevented = functionThatReturnsFalse;\r\n    }\r\n    this.isPropagationStopped = functionThatReturnsFalse;\r\n    return this;\r\n  }\r\n\r\n  assign(SyntheticBaseEvent.prototype, {\r\n    preventDefault: function() {\r\n      this.defaultPrevented = true;\r\n      const event = this.nativeEvent;\r\n      if (!event) {\r\n        return;\r\n      }\r\n\r\n      if (event.preventDefault) {\r\n        event.preventDefault();\r\n        // $FlowFixMe - flow is not aware of `unknown` in IE\r\n      } else if (typeof event.returnValue !== 'unknown') {\r\n        event.returnValue = false;\r\n      }\r\n      this.isDefaultPrevented = functionThatReturnsTrue;\r\n    },\r\n\r\n    stopPropagation: function() {\r\n      const event = this.nativeEvent;\r\n      if (!event) {\r\n        return;\r\n      }\r\n\r\n      if (event.stopPropagation) {\r\n        event.stopPropagation();\r\n        // $FlowFixMe - flow is not aware of `unknown` in IE\r\n      } else if (typeof event.cancelBubble !== 'unknown') {\r\n        // The ChangeEventPlugin registers a \"propertychange\" event for\r\n        // IE. This event does not support bubbling or cancelling, and\r\n        // any references to cancelBubble throw \"Member not found\".  A\r\n        // typeof check of \"unknown\" circumvents this issue (and is also\r\n        // IE specific).\r\n        event.cancelBubble = true;\r\n      }\r\n\r\n      this.isPropagationStopped = functionThatReturnsTrue;\r\n    },\r\n\r\n    /**\r\n     * We release all dispatched `SyntheticEvent`s after each event loop, adding\r\n     * them back into the pool. This allows a way to hold onto a reference that\r\n     * won't be added back into the pool.\r\n     */\r\n    persist: function() {\r\n      // Modern event system doesn't use pooling.\r\n    },\r\n\r\n    /**\r\n     * Checks if this event should be released back into the pool.\r\n     *\r\n     * @return {boolean} True if this should not be released, false otherwise.\r\n     */\r\n    isPersistent: functionThatReturnsTrue,\r\n  });\r\n  return SyntheticBaseEvent;\r\n}\r\n\r\n/**\r\n * @interface Event\r\n * @see http://www.w3.org/TR/DOM-Level-3-Events/\r\n */\r\nconst EventInterface = {\r\n  eventPhase: 0,\r\n  bubbles: 0,\r\n  cancelable: 0,\r\n  timeStamp: function(event) {\r\n    return event.timeStamp || Date.now();\r\n  },\r\n  defaultPrevented: 0,\r\n  isTrusted: 0,\r\n};\r\nexport const SyntheticEvent = createSyntheticEvent(EventInterface);\r\n\r\nconst UIEventInterface: EventInterfaceType = {\r\n  ...EventInterface,\r\n  view: 0,\r\n  detail: 0,\r\n};\r\nexport const SyntheticUIEvent = createSyntheticEvent(UIEventInterface);\r\n\r\nlet lastMovementX;\r\nlet lastMovementY;\r\nlet lastMouseEvent;\r\n\r\nfunction updateMouseMovementPolyfillState(event) {\r\n  if (event !== lastMouseEvent) {\r\n    if (lastMouseEvent && event.type === 'mousemove') {\r\n      // $FlowFixMe assuming this is a number\r\n      lastMovementX = event.screenX - lastMouseEvent.screenX;\r\n      // $FlowFixMe assuming this is a number\r\n      lastMovementY = event.screenY - lastMouseEvent.screenY;\r\n    } else {\r\n      lastMovementX = 0;\r\n      lastMovementY = 0;\r\n    }\r\n    lastMouseEvent = event;\r\n  }\r\n}\r\n\r\n/**\r\n * @interface MouseEvent\r\n * @see http://www.w3.org/TR/DOM-Level-3-Events/\r\n */\r\nconst MouseEventInterface: EventInterfaceType = {\r\n  ...UIEventInterface,\r\n  screenX: 0,\r\n  screenY: 0,\r\n  clientX: 0,\r\n  clientY: 0,\r\n  pageX: 0,\r\n  pageY: 0,\r\n  ctrlKey: 0,\r\n  shiftKey: 0,\r\n  altKey: 0,\r\n  metaKey: 0,\r\n  getModifierState: getEventModifierState,\r\n  button: 0,\r\n  buttons: 0,\r\n  relatedTarget: function(event) {\r\n    if (event.relatedTarget === undefined)\r\n      return event.fromElement === event.srcElement\r\n        ? event.toElement\r\n        : event.fromElement;\r\n\r\n    return event.relatedTarget;\r\n  },\r\n  movementX: function(event) {\r\n    if ('movementX' in event) {\r\n      return event.movementX;\r\n    }\r\n    updateMouseMovementPolyfillState(event);\r\n    return lastMovementX;\r\n  },\r\n  movementY: function(event) {\r\n    if ('movementY' in event) {\r\n      return event.movementY;\r\n    }\r\n    // Don't need to call updateMouseMovementPolyfillState() here\r\n    // because it's guaranteed to have already run when movementX\r\n    // was copied.\r\n    return lastMovementY;\r\n  },\r\n};\r\nexport const SyntheticMouseEvent = createSyntheticEvent(MouseEventInterface);\r\n\r\n/**\r\n * @interface DragEvent\r\n * @see http://www.w3.org/TR/DOM-Level-3-Events/\r\n */\r\nconst DragEventInterface: EventInterfaceType = {\r\n  ...MouseEventInterface,\r\n  dataTransfer: 0,\r\n};\r\nexport const SyntheticDragEvent = createSyntheticEvent(DragEventInterface);\r\n\r\n/**\r\n * @interface FocusEvent\r\n * @see http://www.w3.org/TR/DOM-Level-3-Events/\r\n */\r\nconst FocusEventInterface: EventInterfaceType = {\r\n  ...UIEventInterface,\r\n  relatedTarget: 0,\r\n};\r\nexport const SyntheticFocusEvent = createSyntheticEvent(FocusEventInterface);\r\n\r\n/**\r\n * @interface Event\r\n * @see http://www.w3.org/TR/css3-animations/#AnimationEvent-interface\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEvent\r\n */\r\nconst AnimationEventInterface: EventInterfaceType = {\r\n  ...EventInterface,\r\n  animationName: 0,\r\n  elapsedTime: 0,\r\n  pseudoElement: 0,\r\n};\r\nexport const SyntheticAnimationEvent = createSyntheticEvent(\r\n  AnimationEventInterface,\r\n);\r\n\r\n/**\r\n * @interface Event\r\n * @see http://www.w3.org/TR/clipboard-apis/\r\n */\r\nconst ClipboardEventInterface: EventInterfaceType = {\r\n  ...EventInterface,\r\n  clipboardData: function(event) {\r\n    return 'clipboardData' in event\r\n      ? event.clipboardData\r\n      : window.clipboardData;\r\n  },\r\n};\r\nexport const SyntheticClipboardEvent = createSyntheticEvent(\r\n  ClipboardEventInterface,\r\n);\r\n\r\n/**\r\n * @interface Event\r\n * @see http://www.w3.org/TR/DOM-Level-3-Events/#events-compositionevents\r\n */\r\nconst CompositionEventInterface: EventInterfaceType = {\r\n  ...EventInterface,\r\n  data: 0,\r\n};\r\nexport const SyntheticCompositionEvent = createSyntheticEvent(\r\n  CompositionEventInterface,\r\n);\r\n\r\n/**\r\n * @interface Event\r\n * @see http://www.w3.org/TR/2013/WD-DOM-Level-3-Events-20131105\r\n *      /#events-inputevents\r\n */\r\n// Happens to share the same list for now.\r\nexport const SyntheticInputEvent = SyntheticCompositionEvent;\r\n\r\n/**\r\n * Normalization of deprecated HTML5 `key` values\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent#Key_names\r\n */\r\nconst normalizeKey = {\r\n  Esc: 'Escape',\r\n  Spacebar: ' ',\r\n  Left: 'ArrowLeft',\r\n  Up: 'ArrowUp',\r\n  Right: 'ArrowRight',\r\n  Down: 'ArrowDown',\r\n  Del: 'Delete',\r\n  Win: 'OS',\r\n  Menu: 'ContextMenu',\r\n  Apps: 'ContextMenu',\r\n  Scroll: 'ScrollLock',\r\n  MozPrintableKey: 'Unidentified',\r\n};\r\n\r\n/**\r\n * Translation from legacy `keyCode` to HTML5 `key`\r\n * Only special keys supported, all others depend on keyboard layout or browser\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent#Key_names\r\n */\r\nconst translateToKey = {\r\n  '8': 'Backspace',\r\n  '9': 'Tab',\r\n  '12': 'Clear',\r\n  '13': 'Enter',\r\n  '16': 'Shift',\r\n  '17': 'Control',\r\n  '18': 'Alt',\r\n  '19': 'Pause',\r\n  '20': 'CapsLock',\r\n  '27': 'Escape',\r\n  '32': ' ',\r\n  '33': 'PageUp',\r\n  '34': 'PageDown',\r\n  '35': 'End',\r\n  '36': 'Home',\r\n  '37': 'ArrowLeft',\r\n  '38': 'ArrowUp',\r\n  '39': 'ArrowRight',\r\n  '40': 'ArrowDown',\r\n  '45': 'Insert',\r\n  '46': 'Delete',\r\n  '112': 'F1',\r\n  '113': 'F2',\r\n  '114': 'F3',\r\n  '115': 'F4',\r\n  '116': 'F5',\r\n  '117': 'F6',\r\n  '118': 'F7',\r\n  '119': 'F8',\r\n  '120': 'F9',\r\n  '121': 'F10',\r\n  '122': 'F11',\r\n  '123': 'F12',\r\n  '144': 'NumLock',\r\n  '145': 'ScrollLock',\r\n  '224': 'Meta',\r\n};\r\n\r\n/**\r\n * @param {object} nativeEvent Native browser event.\r\n * @return {string} Normalized `key` property.\r\n */\r\nfunction getEventKey(nativeEvent) {\r\n  if (nativeEvent.key) {\r\n    // Normalize inconsistent values reported by browsers due to\r\n    // implementations of a working draft specification.\r\n\r\n    // FireFox implements `key` but returns `MozPrintableKey` for all\r\n    // printable characters (normalized to `Unidentified`), ignore it.\r\n    const key =\r\n      // $FlowFixMe unable to index with a `mixed` value\r\n      normalizeKey[nativeEvent.key] || nativeEvent.key;\r\n    if (key !== 'Unidentified') {\r\n      return key;\r\n    }\r\n  }\r\n\r\n  // Browser does not implement `key`, polyfill as much of it as we can.\r\n  if (nativeEvent.type === 'keypress') {\r\n    const charCode = getEventCharCode(\r\n      // $FlowFixMe unable to narrow to `KeyboardEvent`\r\n      nativeEvent,\r\n    );\r\n\r\n    // The enter-key is technically both printable and non-printable and can\r\n    // thus be captured by `keypress`, no other non-printable key should.\r\n    return charCode === 13 ? 'Enter' : String.fromCharCode(charCode);\r\n  }\r\n  if (nativeEvent.type === 'keydown' || nativeEvent.type === 'keyup') {\r\n    // While user keyboard layout determines the actual meaning of each\r\n    // `keyCode` value, almost all function keys have a universal value.\r\n    // $FlowFixMe unable to index with a `mixed` value\r\n    return translateToKey[nativeEvent.keyCode] || 'Unidentified';\r\n  }\r\n  return '';\r\n}\r\n\r\n/**\r\n * Translation from modifier key to the associated property in the event.\r\n * @see http://www.w3.org/TR/DOM-Level-3-Events/#keys-Modifiers\r\n */\r\nconst modifierKeyToProp = {\r\n  Alt: 'altKey',\r\n  Control: 'ctrlKey',\r\n  Meta: 'metaKey',\r\n  Shift: 'shiftKey',\r\n};\r\n\r\n// Older browsers (Safari <= 10, iOS Safari <= 10.2) do not support\r\n// getModifierState. If getModifierState is not supported, we map it to a set of\r\n// modifier keys exposed by the event. In this case, Lock-keys are not supported.\r\nfunction modifierStateGetter(keyArg) {\r\n  const syntheticEvent = this;\r\n  const nativeEvent = syntheticEvent.nativeEvent;\r\n  if (nativeEvent.getModifierState) {\r\n    return nativeEvent.getModifierState(keyArg);\r\n  }\r\n  const keyProp = modifierKeyToProp[keyArg];\r\n  return keyProp ? !!nativeEvent[keyProp] : false;\r\n}\r\n\r\nfunction getEventModifierState(nativeEvent) {\r\n  return modifierStateGetter;\r\n}\r\n\r\n/**\r\n * @interface KeyboardEvent\r\n * @see http://www.w3.org/TR/DOM-Level-3-Events/\r\n */\r\nconst KeyboardEventInterface = {\r\n  ...UIEventInterface,\r\n  key: getEventKey,\r\n  code: 0,\r\n  location: 0,\r\n  ctrlKey: 0,\r\n  shiftKey: 0,\r\n  altKey: 0,\r\n  metaKey: 0,\r\n  repeat: 0,\r\n  locale: 0,\r\n  getModifierState: getEventModifierState,\r\n  // Legacy Interface\r\n  charCode: function(event) {\r\n    // `charCode` is the result of a KeyPress event and represents the value of\r\n    // the actual printable character.\r\n\r\n    // KeyPress is deprecated, but its replacement is not yet final and not\r\n    // implemented in any major browser. Only KeyPress has charCode.\r\n    if (event.type === 'keypress') {\r\n      return getEventCharCode(\r\n        // $FlowFixMe unable to narrow to `KeyboardEvent`\r\n        event,\r\n      );\r\n    }\r\n    return 0;\r\n  },\r\n  keyCode: function(event) {\r\n    // `keyCode` is the result of a KeyDown/Up event and represents the value of\r\n    // physical keyboard key.\r\n\r\n    // The actual meaning of the value depends on the users' keyboard layout\r\n    // which cannot be detected. Assuming that it is a US keyboard layout\r\n    // provides a surprisingly accurate mapping for US and European users.\r\n    // Due to this, it is left to the user to implement at this time.\r\n    if (event.type === 'keydown' || event.type === 'keyup') {\r\n      return event.keyCode;\r\n    }\r\n    return 0;\r\n  },\r\n  which: function(event) {\r\n    // `which` is an alias for either `keyCode` or `charCode` depending on the\r\n    // type of the event.\r\n    if (event.type === 'keypress') {\r\n      return getEventCharCode(\r\n        // $FlowFixMe unable to narrow to `KeyboardEvent`\r\n        event,\r\n      );\r\n    }\r\n    if (event.type === 'keydown' || event.type === 'keyup') {\r\n      return event.keyCode;\r\n    }\r\n    return 0;\r\n  },\r\n};\r\nexport const SyntheticKeyboardEvent = createSyntheticEvent(\r\n  KeyboardEventInterface,\r\n);\r\n\r\n/**\r\n * @interface PointerEvent\r\n * @see http://www.w3.org/TR/pointerevents/\r\n */\r\nconst PointerEventInterface = {\r\n  ...MouseEventInterface,\r\n  pointerId: 0,\r\n  width: 0,\r\n  height: 0,\r\n  pressure: 0,\r\n  tangentialPressure: 0,\r\n  tiltX: 0,\r\n  tiltY: 0,\r\n  twist: 0,\r\n  pointerType: 0,\r\n  isPrimary: 0,\r\n};\r\nexport const SyntheticPointerEvent = createSyntheticEvent(\r\n  PointerEventInterface,\r\n);\r\n\r\n/**\r\n * @interface TouchEvent\r\n * @see http://www.w3.org/TR/touch-events/\r\n */\r\nconst TouchEventInterface = {\r\n  ...UIEventInterface,\r\n  touches: 0,\r\n  targetTouches: 0,\r\n  changedTouches: 0,\r\n  altKey: 0,\r\n  metaKey: 0,\r\n  ctrlKey: 0,\r\n  shiftKey: 0,\r\n  getModifierState: getEventModifierState,\r\n};\r\nexport const SyntheticTouchEvent = createSyntheticEvent(TouchEventInterface);\r\n\r\n/**\r\n * @interface Event\r\n * @see http://www.w3.org/TR/2009/WD-css3-transitions-20090320/#transition-events-\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/TransitionEvent\r\n */\r\nconst TransitionEventInterface = {\r\n  ...EventInterface,\r\n  propertyName: 0,\r\n  elapsedTime: 0,\r\n  pseudoElement: 0,\r\n};\r\nexport const SyntheticTransitionEvent = createSyntheticEvent(\r\n  TransitionEventInterface,\r\n);\r\n\r\n/**\r\n * @interface WheelEvent\r\n * @see http://www.w3.org/TR/DOM-Level-3-Events/\r\n */\r\nconst WheelEventInterface = {\r\n  ...MouseEventInterface,\r\n  deltaX(event) {\r\n    return 'deltaX' in event\r\n      ? event.deltaX\r\n      : // Fallback to `wheelDeltaX` for Webkit and normalize (right is positive).\r\n      'wheelDeltaX' in event\r\n      ? // $FlowFixMe assuming this is a number\r\n        -event.wheelDeltaX\r\n      : 0;\r\n  },\r\n  deltaY(event) {\r\n    return 'deltaY' in event\r\n      ? event.deltaY\r\n      : // Fallback to `wheelDeltaY` for Webkit and normalize (down is positive).\r\n      'wheelDeltaY' in event\r\n      ? // $FlowFixMe assuming this is a number\r\n        -event.wheelDeltaY\r\n      : // Fallback to `wheelDelta` for IE<9 and normalize (down is positive).\r\n      'wheelDelta' in event\r\n      ? // $FlowFixMe assuming this is a number\r\n        -event.wheelDelta\r\n      : 0;\r\n  },\r\n  deltaZ: 0,\r\n\r\n  // Browsers without \"deltaMode\" is reporting in raw wheel delta where one\r\n  // notch on the scroll is always +/- 120, roughly equivalent to pixels.\r\n  // A good approximation of DOM_DELTA_LINE (1) is 5% of viewport size or\r\n  // ~40 pixels, for DOM_DELTA_SCREEN (2) it is 87.5% of viewport size.\r\n  deltaMode: 0,\r\n};\r\nexport const SyntheticWheelEvent = createSyntheticEvent(WheelEventInterface);\r\n","/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * @flow\r\n */\r\n\r\n/**\r\n * HTML nodeType values that represent the type of the node\r\n */\r\n\r\nexport const ELEMENT_NODE = 1;\r\nexport const TEXT_NODE = 3;\r\nexport const COMMENT_NODE = 8;\r\nexport const DOCUMENT_NODE = 9;\r\nexport const DOCUMENT_FRAGMENT_NODE = 11;\r\n","/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * @flow\r\n */\r\n\r\nfunction invokeGuardedCallbackProd<A, B, C, D, E, F, Context>(\r\n  name: string | null,\r\n  func: (a: A, b: B, c: C, d: D, e: E, f: F) => mixed,\r\n  context: Context,\r\n  a: A,\r\n  b: B,\r\n  c: C,\r\n  d: D,\r\n  e: E,\r\n  f: F,\r\n) {\r\n  const funcArgs = Array.prototype.slice.call(arguments, 3);\r\n  try {\r\n    func.apply(context, funcArgs);\r\n  } catch (error) {\r\n    this.onError(error);\r\n  }\r\n}\r\n\r\nlet invokeGuardedCallbackImpl = invokeGuardedCallbackProd;\r\n\r\nif (__DEV__) {\r\n  // In DEV mode, we swap out invokeGuardedCallback for a special version\r\n  // that plays more nicely with the browser's DevTools. The idea is to preserve\r\n  // \"Pause on exceptions\" behavior. Because React wraps all user-provided\r\n  // functions in invokeGuardedCallback, and the production version of\r\n  // invokeGuardedCallback uses a try-catch, all user exceptions are treated\r\n  // like caught exceptions, and the DevTools won't pause unless the developer\r\n  // takes the extra step of enabling pause on caught exceptions. This is\r\n  // unintuitive, though, because even though React has caught the error, from\r\n  // the developer's perspective, the error is uncaught.\r\n  //\r\n  // To preserve the expected \"Pause on exceptions\" behavior, we don't use a\r\n  // try-catch in DEV. Instead, we synchronously dispatch a fake event to a fake\r\n  // DOM node, and call the user-provided callback from inside an event handler\r\n  // for that fake event. If the callback throws, the error is \"captured\" using\r\n  // a global event handler. But because the error happens in a different\r\n  // event loop context, it does not interrupt the normal program flow.\r\n  // Effectively, this gives us try-catch behavior without actually using\r\n  // try-catch. Neat!\r\n\r\n  // Check that the browser supports the APIs we need to implement our special\r\n  // DEV version of invokeGuardedCallback\r\n  if (\r\n    typeof window !== 'undefined' &&\r\n    typeof window.dispatchEvent === 'function' &&\r\n    typeof document !== 'undefined' &&\r\n    typeof document.createEvent === 'function'\r\n  ) {\r\n    const fakeNode = document.createElement('react');\r\n\r\n    invokeGuardedCallbackImpl = function invokeGuardedCallbackDev<\r\n      A,\r\n      B,\r\n      C,\r\n      D,\r\n      E,\r\n      F,\r\n      Context,\r\n    >(\r\n      name: string | null,\r\n      func: (a: A, b: B, c: C, d: D, e: E, f: F) => mixed,\r\n      context: Context,\r\n      a: A,\r\n      b: B,\r\n      c: C,\r\n      d: D,\r\n      e: E,\r\n      f: F,\r\n    ) {\r\n      // If document doesn't exist we know for sure we will crash in this method\r\n      // when we call document.createEvent(). However this can cause confusing\r\n      // errors: https://github.com/facebook/create-react-app/issues/3482\r\n      // So we preemptively throw with a better message instead.\r\n      if (typeof document === 'undefined' || document === null) {\r\n        throw new Error(\r\n          'The `document` global was defined when React was initialized, but is not ' +\r\n            'defined anymore. This can happen in a test environment if a component ' +\r\n            'schedules an update from an asynchronous callback, but the test has already ' +\r\n            'finished running. To solve this, you can either unmount the component at ' +\r\n            'the end of your test (and ensure that any asynchronous operations get ' +\r\n            'canceled in `componentWillUnmount`), or you can change the test itself ' +\r\n            'to be asynchronous.',\r\n        );\r\n      }\r\n\r\n      const evt = document.createEvent('Event');\r\n\r\n      let didCall = false;\r\n      // Keeps track of whether the user-provided callback threw an error. We\r\n      // set this to true at the beginning, then set it to false right after\r\n      // calling the function. If the function errors, `didError` will never be\r\n      // set to false. This strategy works even if the browser is flaky and\r\n      // fails to call our global error handler, because it doesn't rely on\r\n      // the error event at all.\r\n      let didError = true;\r\n\r\n      // Keeps track of the value of window.event so that we can reset it\r\n      // during the callback to let user code access window.event in the\r\n      // browsers that support it.\r\n      const windowEvent = window.event;\r\n\r\n      // Keeps track of the descriptor of window.event to restore it after event\r\n      // dispatching: https://github.com/facebook/react/issues/13688\r\n      const windowEventDescriptor = Object.getOwnPropertyDescriptor(\r\n        window,\r\n        'event',\r\n      );\r\n\r\n      function restoreAfterDispatch() {\r\n        // We immediately remove the callback from event listeners so that\r\n        // nested `invokeGuardedCallback` calls do not clash. Otherwise, a\r\n        // nested call would trigger the fake event handlers of any call higher\r\n        // in the stack.\r\n        fakeNode.removeEventListener(evtType, callCallback, false);\r\n\r\n        // We check for window.hasOwnProperty('event') to prevent the\r\n        // window.event assignment in both IE <= 10 as they throw an error\r\n        // \"Member not found\" in strict mode, and in Firefox which does not\r\n        // support window.event.\r\n        if (\r\n          typeof window.event !== 'undefined' &&\r\n          window.hasOwnProperty('event')\r\n        ) {\r\n          window.event = windowEvent;\r\n        }\r\n      }\r\n\r\n      // Create an event handler for our fake event. We will synchronously\r\n      // dispatch our fake event using `dispatchEvent`. Inside the handler, we\r\n      // call the user-provided callback.\r\n      const funcArgs = Array.prototype.slice.call(arguments, 3);\r\n      function callCallback() {\r\n        didCall = true;\r\n        restoreAfterDispatch();\r\n        func.apply(context, funcArgs);\r\n        didError = false;\r\n      }\r\n\r\n      // Create a global error event handler. We use this to capture the value\r\n      // that was thrown. It's possible that this error handler will fire more\r\n      // than once; for example, if non-React code also calls `dispatchEvent`\r\n      // and a handler for that event throws. We should be resilient to most of\r\n      // those cases. Even if our error event handler fires more than once, the\r\n      // last error event is always used. If the callback actually does error,\r\n      // we know that the last error event is the correct one, because it's not\r\n      // possible for anything else to have happened in between our callback\r\n      // erroring and the code that follows the `dispatchEvent` call below. If\r\n      // the callback doesn't error, but the error event was fired, we know to\r\n      // ignore it because `didError` will be false, as described above.\r\n      let error;\r\n      // Use this to track whether the error event is ever called.\r\n      let didSetError = false;\r\n      let isCrossOriginError = false;\r\n\r\n      function handleWindowError(event) {\r\n        error = event.error;\r\n        didSetError = true;\r\n        if (error === null && event.colno === 0 && event.lineno === 0) {\r\n          isCrossOriginError = true;\r\n        }\r\n        if (event.defaultPrevented) {\r\n          // Some other error handler has prevented default.\r\n          // Browsers silence the error report if this happens.\r\n          // We'll remember this to later decide whether to log it or not.\r\n          if (error != null && typeof error === 'object') {\r\n            try {\r\n              error._suppressLogging = true;\r\n            } catch (inner) {\r\n              // Ignore.\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      // Create a fake event type.\r\n      const evtType = `react-${name ? name : 'invokeguardedcallback'}`;\r\n\r\n      // Attach our event handlers\r\n      window.addEventListener('error', handleWindowError);\r\n      fakeNode.addEventListener(evtType, callCallback, false);\r\n\r\n      // Synchronously dispatch our fake event. If the user-provided function\r\n      // errors, it will trigger our global error handler.\r\n      evt.initEvent(evtType, false, false);\r\n      fakeNode.dispatchEvent(evt);\r\n\r\n      if (windowEventDescriptor) {\r\n        Object.defineProperty(window, 'event', windowEventDescriptor);\r\n      }\r\n\r\n      if (didCall && didError) {\r\n        if (!didSetError) {\r\n          // The callback errored, but the error event never fired.\r\n          // eslint-disable-next-line react-internal/prod-error-codes\r\n          error = new Error(\r\n            'An error was thrown inside one of your components, but React ' +\r\n              \"doesn't know what it was. This is likely due to browser \" +\r\n              'flakiness. React does its best to preserve the \"Pause on ' +\r\n              'exceptions\" behavior of the DevTools, which requires some ' +\r\n              \"DEV-mode only tricks. It's possible that these don't work in \" +\r\n              'your browser. Try triggering the error in production mode, ' +\r\n              'or switching to a modern browser. If you suspect that this is ' +\r\n              'actually an issue with React, please file an issue.',\r\n          );\r\n        } else if (isCrossOriginError) {\r\n          // eslint-disable-next-line react-internal/prod-error-codes\r\n          error = new Error(\r\n            \"A cross-origin error was thrown. React doesn't have access to \" +\r\n              'the actual error object in development. ' +\r\n              'See https://reactjs.org/link/crossorigin-error for more information.',\r\n          );\r\n        }\r\n        this.onError(error);\r\n      }\r\n\r\n      // Remove our event listeners\r\n      window.removeEventListener('error', handleWindowError);\r\n\r\n      if (!didCall) {\r\n        // Something went really wrong, and our event was not dispatched.\r\n        // https://github.com/facebook/react/issues/16734\r\n        // https://github.com/facebook/react/issues/16585\r\n        // Fall back to the production implementation.\r\n        restoreAfterDispatch();\r\n        return invokeGuardedCallbackProd.apply(this, arguments);\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\nexport default invokeGuardedCallbackImpl;\r\n","/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * @flow\r\n */\r\n\r\nimport invokeGuardedCallbackImpl from './invokeGuardedCallbackImpl';\r\n\r\n// Used by Fiber to simulate a try-catch.\r\nlet hasError: boolean = false;\r\nlet caughtError: mixed = null;\r\n\r\n// Used by event system to capture/rethrow the first error.\r\nlet hasRethrowError: boolean = false;\r\nlet rethrowError: mixed = null;\r\n\r\nconst reporter = {\r\n  onError(error: mixed) {\r\n    hasError = true;\r\n    caughtError = error;\r\n  },\r\n};\r\n\r\n/**\r\n * Call a function while guarding against errors that happens within it.\r\n * Returns an error if it throws, otherwise null.\r\n *\r\n * In production, this is implemented using a try-catch. The reason we don't\r\n * use a try-catch directly is so that we can swap out a different\r\n * implementation in DEV mode.\r\n *\r\n * @param {String} name of the guard to use for logging or debugging\r\n * @param {Function} func The function to invoke\r\n * @param {*} context The context to use when calling the function\r\n * @param {...*} args Arguments for function\r\n */\r\nexport function invokeGuardedCallback<A, B, C, D, E, F, Context>(\r\n  name: string | null,\r\n  func: (a: A, b: B, c: C, d: D, e: E, f: F) => mixed,\r\n  context: Context,\r\n  a: A,\r\n  b: B,\r\n  c: C,\r\n  d: D,\r\n  e: E,\r\n  f: F,\r\n): void {\r\n  hasError = false;\r\n  caughtError = null;\r\n  invokeGuardedCallbackImpl.apply(reporter, arguments);\r\n}\r\n\r\n/**\r\n * Same as invokeGuardedCallback, but instead of returning an error, it stores\r\n * it in a global so it can be rethrown by `rethrowCaughtError` later.\r\n * TODO: See if caughtError and rethrowError can be unified.\r\n *\r\n * @param {String} name of the guard to use for logging or debugging\r\n * @param {Function} func The function to invoke\r\n * @param {*} context The context to use when calling the function\r\n * @param {...*} args Arguments for function\r\n */\r\nexport function invokeGuardedCallbackAndCatchFirstError<\r\n  A,\r\n  B,\r\n  C,\r\n  D,\r\n  E,\r\n  F,\r\n  Context,\r\n>(\r\n  name: string | null,\r\n  func: (a: A, b: B, c: C, d: D, e: E, f: F) => void,\r\n  context: Context,\r\n  a: A,\r\n  b: B,\r\n  c: C,\r\n  d: D,\r\n  e: E,\r\n  f: F,\r\n): void {\r\n  invokeGuardedCallback.apply(this, arguments);\r\n  if (hasError) {\r\n    const error = clearCaughtError();\r\n    if (!hasRethrowError) {\r\n      hasRethrowError = true;\r\n      rethrowError = error;\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * During execution of guarded functions we will capture the first error which\r\n * we will rethrow to be handled by the top level error handler.\r\n */\r\nexport function rethrowCaughtError() {\r\n  if (hasRethrowError) {\r\n    const error = rethrowError;\r\n    hasRethrowError = false;\r\n    rethrowError = null;\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport function hasCaughtError(): boolean {\r\n  return hasError;\r\n}\r\n\r\nexport function clearCaughtError() {\r\n  if (hasError) {\r\n    const error = caughtError;\r\n    hasError = false;\r\n    caughtError = null;\r\n    return error;\r\n  } else {\r\n    throw new Error(\r\n      'clearCaughtError was called but no error was captured. This error ' +\r\n        'is likely caused by a bug in React. Please file an issue.',\r\n    );\r\n  }\r\n}\r\n","/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * @flow\r\n */\r\n\r\ndeclare function isArray(a: mixed): boolean %checks(Array.isArray(a));\r\n\r\nconst isArrayImpl = Array.isArray;\r\n\r\n// eslint-disable-next-line no-redeclare\r\nfunction isArray(a: mixed): boolean {\r\n  return isArrayImpl(a);\r\n}\r\n\r\nexport default isArray;\r\n","/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\nimport {findCurrentFiberUsingSlowPath} from 'react-reconciler/src/ReactFiberTreeReflection';\r\nimport {get as getInstance} from 'shared/ReactInstanceMap';\r\nimport {\r\n  ClassComponent,\r\n  FunctionComponent,\r\n  HostComponent,\r\n  HostText,\r\n} from 'react-reconciler/src/ReactWorkTags';\r\nimport {SyntheticEvent} from '../events/SyntheticEvent';\r\nimport {ELEMENT_NODE} from '../shared/HTMLNodeType';\r\nimport {\r\n  rethrowCaughtError,\r\n  invokeGuardedCallbackAndCatchFirstError,\r\n} from 'shared/ReactErrorUtils';\r\nimport assign from 'shared/assign';\r\nimport isArray from 'shared/isArray';\r\n\r\n// Keep in sync with ReactDOM.js:\r\nconst SecretInternals =\r\n  ReactDOM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\r\nconst EventInternals = SecretInternals.Events;\r\nconst getInstanceFromNode = EventInternals[0];\r\nconst getNodeFromInstance = EventInternals[1];\r\nconst getFiberCurrentPropsFromNode = EventInternals[2];\r\nconst enqueueStateRestore = EventInternals[3];\r\nconst restoreStateIfNeeded = EventInternals[4];\r\n\r\nconst act = React.unstable_act;\r\n\r\nfunction Event(suffix) {}\r\n\r\nlet hasWarnedAboutDeprecatedMockComponent = false;\r\n\r\n/**\r\n * @class ReactTestUtils\r\n */\r\n\r\nfunction findAllInRenderedFiberTreeInternal(fiber, test) {\r\n  if (!fiber) {\r\n    return [];\r\n  }\r\n  const currentParent = findCurrentFiberUsingSlowPath(fiber);\r\n  if (!currentParent) {\r\n    return [];\r\n  }\r\n  let node = currentParent;\r\n  const ret = [];\r\n  while (true) {\r\n    if (\r\n      node.tag === HostComponent ||\r\n      node.tag === HostText ||\r\n      node.tag === ClassComponent ||\r\n      node.tag === FunctionComponent\r\n    ) {\r\n      const publicInst = node.stateNode;\r\n      if (test(publicInst)) {\r\n        ret.push(publicInst);\r\n      }\r\n    }\r\n    if (node.child) {\r\n      node.child.return = node;\r\n      node = node.child;\r\n      continue;\r\n    }\r\n    if (node === currentParent) {\r\n      return ret;\r\n    }\r\n    while (!node.sibling) {\r\n      if (!node.return || node.return === currentParent) {\r\n        return ret;\r\n      }\r\n      node = node.return;\r\n    }\r\n    node.sibling.return = node.return;\r\n    node = node.sibling;\r\n  }\r\n}\r\n\r\nfunction validateClassInstance(inst, methodName) {\r\n  if (!inst) {\r\n    // This is probably too relaxed but it's existing behavior.\r\n    return;\r\n  }\r\n  if (getInstance(inst)) {\r\n    // This is a public instance indeed.\r\n    return;\r\n  }\r\n  let received;\r\n  const stringified = String(inst);\r\n  if (isArray(inst)) {\r\n    received = 'an array';\r\n  } else if (inst && inst.nodeType === ELEMENT_NODE && inst.tagName) {\r\n    received = 'a DOM node';\r\n  } else if (stringified === '[object Object]') {\r\n    received = 'object with keys {' + Object.keys(inst).join(', ') + '}';\r\n  } else {\r\n    received = stringified;\r\n  }\r\n\r\n  throw new Error(\r\n    `${methodName}(...): the first argument must be a React class instance. ` +\r\n      `Instead received: ${received}.`,\r\n  );\r\n}\r\n\r\n/**\r\n * Utilities for making it easy to test React components.\r\n *\r\n * See https://reactjs.org/docs/test-utils.html\r\n *\r\n * Todo: Support the entire DOM.scry query syntax. For now, these simple\r\n * utilities will suffice for testing purposes.\r\n * @lends ReactTestUtils\r\n */\r\nfunction renderIntoDocument(element) {\r\n  const div = document.createElement('div');\r\n  // None of our tests actually require attaching the container to the\r\n  // DOM, and doing so creates a mess that we rely on test isolation to\r\n  // clean up, so we're going to stop honoring the name of this method\r\n  // (and probably rename it eventually) if no problems arise.\r\n  // document.documentElement.appendChild(div);\r\n  return ReactDOM.render(element, div);\r\n}\r\n\r\nfunction isElement(element) {\r\n  return React.isValidElement(element);\r\n}\r\n\r\nfunction isElementOfType(inst, convenienceConstructor) {\r\n  return React.isValidElement(inst) && inst.type === convenienceConstructor;\r\n}\r\n\r\nfunction isDOMComponent(inst) {\r\n  return !!(inst && inst.nodeType === ELEMENT_NODE && inst.tagName);\r\n}\r\n\r\nfunction isDOMComponentElement(inst) {\r\n  return !!(inst && React.isValidElement(inst) && !!inst.tagName);\r\n}\r\n\r\nfunction isCompositeComponent(inst) {\r\n  if (isDOMComponent(inst)) {\r\n    // Accessing inst.setState warns; just return false as that'll be what\r\n    // this returns when we have DOM nodes as refs directly\r\n    return false;\r\n  }\r\n  return (\r\n    inst != null &&\r\n    typeof inst.render === 'function' &&\r\n    typeof inst.setState === 'function'\r\n  );\r\n}\r\n\r\nfunction isCompositeComponentWithType(inst, type) {\r\n  if (!isCompositeComponent(inst)) {\r\n    return false;\r\n  }\r\n  const internalInstance = getInstance(inst);\r\n  const constructor = internalInstance.type;\r\n  return constructor === type;\r\n}\r\n\r\nfunction findAllInRenderedTree(inst, test) {\r\n  validateClassInstance(inst, 'findAllInRenderedTree');\r\n  if (!inst) {\r\n    return [];\r\n  }\r\n  const internalInstance = getInstance(inst);\r\n  return findAllInRenderedFiberTreeInternal(internalInstance, test);\r\n}\r\n\r\n/**\r\n * Finds all instances of components in the rendered tree that are DOM\r\n * components with the class name matching `className`.\r\n * @return {array} an array of all the matches.\r\n */\r\nfunction scryRenderedDOMComponentsWithClass(root, classNames) {\r\n  validateClassInstance(root, 'scryRenderedDOMComponentsWithClass');\r\n  return findAllInRenderedTree(root, function(inst) {\r\n    if (isDOMComponent(inst)) {\r\n      let className = inst.className;\r\n      if (typeof className !== 'string') {\r\n        // SVG, probably.\r\n        className = inst.getAttribute('class') || '';\r\n      }\r\n      const classList = className.split(/\\s+/);\r\n\r\n      if (!isArray(classNames)) {\r\n        if (classNames === undefined) {\r\n          throw new Error(\r\n            'TestUtils.scryRenderedDOMComponentsWithClass expects a ' +\r\n              'className as a second argument.',\r\n          );\r\n        }\r\n\r\n        classNames = classNames.split(/\\s+/);\r\n      }\r\n      return classNames.every(function(name) {\r\n        return classList.indexOf(name) !== -1;\r\n      });\r\n    }\r\n    return false;\r\n  });\r\n}\r\n\r\n/**\r\n * Like scryRenderedDOMComponentsWithClass but expects there to be one result,\r\n * and returns that one result, or throws exception if there is any other\r\n * number of matches besides one.\r\n * @return {!ReactDOMComponent} The one match.\r\n */\r\nfunction findRenderedDOMComponentWithClass(root, className) {\r\n  validateClassInstance(root, 'findRenderedDOMComponentWithClass');\r\n  const all = scryRenderedDOMComponentsWithClass(root, className);\r\n  if (all.length !== 1) {\r\n    throw new Error(\r\n      'Did not find exactly one match (found: ' +\r\n        all.length +\r\n        ') ' +\r\n        'for class:' +\r\n        className,\r\n    );\r\n  }\r\n  return all[0];\r\n}\r\n\r\n/**\r\n * Finds all instances of components in the rendered tree that are DOM\r\n * components with the tag name matching `tagName`.\r\n * @return {array} an array of all the matches.\r\n */\r\nfunction scryRenderedDOMComponentsWithTag(root, tagName) {\r\n  validateClassInstance(root, 'scryRenderedDOMComponentsWithTag');\r\n  return findAllInRenderedTree(root, function(inst) {\r\n    return (\r\n      isDOMComponent(inst) &&\r\n      inst.tagName.toUpperCase() === tagName.toUpperCase()\r\n    );\r\n  });\r\n}\r\n\r\n/**\r\n * Like scryRenderedDOMComponentsWithTag but expects there to be one result,\r\n * and returns that one result, or throws exception if there is any other\r\n * number of matches besides one.\r\n * @return {!ReactDOMComponent} The one match.\r\n */\r\nfunction findRenderedDOMComponentWithTag(root, tagName) {\r\n  validateClassInstance(root, 'findRenderedDOMComponentWithTag');\r\n  const all = scryRenderedDOMComponentsWithTag(root, tagName);\r\n  if (all.length !== 1) {\r\n    throw new Error(\r\n      'Did not find exactly one match (found: ' +\r\n        all.length +\r\n        ') ' +\r\n        'for tag:' +\r\n        tagName,\r\n    );\r\n  }\r\n  return all[0];\r\n}\r\n\r\n/**\r\n * Finds all instances of components with type equal to `componentType`.\r\n * @return {array} an array of all the matches.\r\n */\r\nfunction scryRenderedComponentsWithType(root, componentType) {\r\n  validateClassInstance(root, 'scryRenderedComponentsWithType');\r\n  return findAllInRenderedTree(root, function(inst) {\r\n    return isCompositeComponentWithType(inst, componentType);\r\n  });\r\n}\r\n\r\n/**\r\n * Same as `scryRenderedComponentsWithType` but expects there to be one result\r\n * and returns that one result, or throws exception if there is any other\r\n * number of matches besides one.\r\n * @return {!ReactComponent} The one match.\r\n */\r\nfunction findRenderedComponentWithType(root, componentType) {\r\n  validateClassInstance(root, 'findRenderedComponentWithType');\r\n  const all = scryRenderedComponentsWithType(root, componentType);\r\n  if (all.length !== 1) {\r\n    throw new Error(\r\n      'Did not find exactly one match (found: ' +\r\n        all.length +\r\n        ') ' +\r\n        'for componentType:' +\r\n        componentType,\r\n    );\r\n  }\r\n  return all[0];\r\n}\r\n\r\n/**\r\n * Pass a mocked component module to this method to augment it with\r\n * useful methods that allow it to be used as a dummy React component.\r\n * Instead of rendering as usual, the component will become a simple\r\n * <div> containing any provided children.\r\n *\r\n * @param {object} module the mock function object exported from a\r\n *                        module that defines the component to be mocked\r\n * @param {?string} mockTagName optional dummy root tag name to return\r\n *                              from render method (overrides\r\n *                              module.mockTagName if provided)\r\n * @return {object} the ReactTestUtils object (for chaining)\r\n */\r\nfunction mockComponent(module, mockTagName) {\r\n  if (__DEV__) {\r\n    if (!hasWarnedAboutDeprecatedMockComponent) {\r\n      hasWarnedAboutDeprecatedMockComponent = true;\r\n      console.warn(\r\n        'ReactTestUtils.mockComponent() is deprecated. ' +\r\n          'Use shallow rendering or jest.mock() instead.\\n\\n' +\r\n          'See https://reactjs.org/link/test-utils-mock-component for more information.',\r\n      );\r\n    }\r\n  }\r\n\r\n  mockTagName = mockTagName || module.mockTagName || 'div';\r\n\r\n  module.prototype.render.mockImplementation(function() {\r\n    return React.createElement(mockTagName, null, this.props.children);\r\n  });\r\n\r\n  return this;\r\n}\r\n\r\nfunction nativeTouchData(x, y) {\r\n  return {\r\n    touches: [{pageX: x, pageY: y}],\r\n  };\r\n}\r\n\r\n// Start of inline: the below functions were inlined from\r\n// EventPropagator.js, as they deviated from ReactDOM's newer\r\n// implementations.\r\n\r\n/**\r\n * Dispatch the event to the listener.\r\n * @param {SyntheticEvent} event SyntheticEvent to handle\r\n * @param {function} listener Application-level callback\r\n * @param {*} inst Internal component instance\r\n */\r\nfunction executeDispatch(event, listener, inst) {\r\n  const type = event.type || 'unknown-event';\r\n  event.currentTarget = getNodeFromInstance(inst);\r\n  invokeGuardedCallbackAndCatchFirstError(type, listener, undefined, event);\r\n  event.currentTarget = null;\r\n}\r\n\r\n/**\r\n * Standard/simple iteration through an event's collected dispatches.\r\n */\r\nfunction executeDispatchesInOrder(event) {\r\n  const dispatchListeners = event._dispatchListeners;\r\n  const dispatchInstances = event._dispatchInstances;\r\n  if (isArray(dispatchListeners)) {\r\n    for (let i = 0; i < dispatchListeners.length; i++) {\r\n      if (event.isPropagationStopped()) {\r\n        break;\r\n      }\r\n      // Listeners and Instances are two parallel arrays that are always in sync.\r\n      executeDispatch(event, dispatchListeners[i], dispatchInstances[i]);\r\n    }\r\n  } else if (dispatchListeners) {\r\n    executeDispatch(event, dispatchListeners, dispatchInstances);\r\n  }\r\n  event._dispatchListeners = null;\r\n  event._dispatchInstances = null;\r\n}\r\n\r\n/**\r\n * Dispatches an event and releases it back into the pool, unless persistent.\r\n *\r\n * @param {?object} event Synthetic event to be dispatched.\r\n * @private\r\n */\r\nconst executeDispatchesAndRelease = function(event: ReactSyntheticEvent) {\r\n  if (event) {\r\n    executeDispatchesInOrder(event);\r\n\r\n    if (!event.isPersistent()) {\r\n      event.constructor.release(event);\r\n    }\r\n  }\r\n};\r\n\r\nfunction isInteractive(tag) {\r\n  return (\r\n    tag === 'button' ||\r\n    tag === 'input' ||\r\n    tag === 'select' ||\r\n    tag === 'textarea'\r\n  );\r\n}\r\n\r\nfunction getParent(inst) {\r\n  do {\r\n    inst = inst.return;\r\n    // TODO: If this is a HostRoot we might want to bail out.\r\n    // That is depending on if we want nested subtrees (layers) to bubble\r\n    // events to their parent. We could also go through parentNode on the\r\n    // host node but that wouldn't work for React Native and doesn't let us\r\n    // do the portal feature.\r\n  } while (inst && inst.tag !== HostComponent);\r\n  if (inst) {\r\n    return inst;\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * Simulates the traversal of a two-phase, capture/bubble event dispatch.\r\n */\r\nexport function traverseTwoPhase(inst, fn, arg) {\r\n  const path = [];\r\n  while (inst) {\r\n    path.push(inst);\r\n    inst = getParent(inst);\r\n  }\r\n  let i;\r\n  for (i = path.length; i-- > 0; ) {\r\n    fn(path[i], 'captured', arg);\r\n  }\r\n  for (i = 0; i < path.length; i++) {\r\n    fn(path[i], 'bubbled', arg);\r\n  }\r\n}\r\n\r\nfunction shouldPreventMouseEvent(name, type, props) {\r\n  switch (name) {\r\n    case 'onClick':\r\n    case 'onClickCapture':\r\n    case 'onDoubleClick':\r\n    case 'onDoubleClickCapture':\r\n    case 'onMouseDown':\r\n    case 'onMouseDownCapture':\r\n    case 'onMouseMove':\r\n    case 'onMouseMoveCapture':\r\n    case 'onMouseUp':\r\n    case 'onMouseUpCapture':\r\n    case 'onMouseEnter':\r\n      return !!(props.disabled && isInteractive(type));\r\n    default:\r\n      return false;\r\n  }\r\n}\r\n\r\n/**\r\n * @param {object} inst The instance, which is the source of events.\r\n * @param {string} registrationName Name of listener (e.g. `onClick`).\r\n * @return {?function} The stored callback.\r\n */\r\nfunction getListener(inst: Fiber, registrationName: string) {\r\n  // TODO: shouldPreventMouseEvent is DOM-specific and definitely should not\r\n  // live here; needs to be moved to a better place soon\r\n  const stateNode = inst.stateNode;\r\n  if (!stateNode) {\r\n    // Work in progress (ex: onload events in incremental mode).\r\n    return null;\r\n  }\r\n  const props = getFiberCurrentPropsFromNode(stateNode);\r\n  if (!props) {\r\n    // Work in progress.\r\n    return null;\r\n  }\r\n  const listener = props[registrationName];\r\n  if (shouldPreventMouseEvent(registrationName, inst.type, props)) {\r\n    return null;\r\n  }\r\n\r\n  if (listener && typeof listener !== 'function') {\r\n    throw new Error(\r\n      `Expected \\`${registrationName}\\` listener to be a function, instead got a value of \\`${typeof listener}\\` type.`,\r\n    );\r\n  }\r\n\r\n  return listener;\r\n}\r\n\r\nfunction listenerAtPhase(inst, event, propagationPhase: PropagationPhases) {\r\n  let registrationName = event._reactName;\r\n  if (propagationPhase === 'captured') {\r\n    registrationName += 'Capture';\r\n  }\r\n  return getListener(inst, registrationName);\r\n}\r\n\r\nfunction accumulateDispatches(inst, ignoredDirection, event) {\r\n  if (inst && event && event._reactName) {\r\n    const registrationName = event._reactName;\r\n    const listener = getListener(inst, registrationName);\r\n    if (listener) {\r\n      if (event._dispatchListeners == null) {\r\n        event._dispatchListeners = [];\r\n      }\r\n      if (event._dispatchInstances == null) {\r\n        event._dispatchInstances = [];\r\n      }\r\n      event._dispatchListeners.push(listener);\r\n      event._dispatchInstances.push(inst);\r\n    }\r\n  }\r\n}\r\n\r\nfunction accumulateDirectionalDispatches(inst, phase, event) {\r\n  if (__DEV__) {\r\n    if (!inst) {\r\n      console.error('Dispatching inst must not be null');\r\n    }\r\n  }\r\n  const listener = listenerAtPhase(inst, event, phase);\r\n  if (listener) {\r\n    if (event._dispatchListeners == null) {\r\n      event._dispatchListeners = [];\r\n    }\r\n    if (event._dispatchInstances == null) {\r\n      event._dispatchInstances = [];\r\n    }\r\n    event._dispatchListeners.push(listener);\r\n    event._dispatchInstances.push(inst);\r\n  }\r\n}\r\n\r\nfunction accumulateDirectDispatchesSingle(event) {\r\n  if (event && event._reactName) {\r\n    accumulateDispatches(event._targetInst, null, event);\r\n  }\r\n}\r\n\r\nfunction accumulateTwoPhaseDispatchesSingle(event) {\r\n  if (event && event._reactName) {\r\n    traverseTwoPhase(event._targetInst, accumulateDirectionalDispatches, event);\r\n  }\r\n}\r\n\r\n// End of inline\r\n\r\nconst Simulate = {};\r\n\r\nconst directDispatchEventTypes = new Set([\r\n  'mouseEnter',\r\n  'mouseLeave',\r\n  'pointerEnter',\r\n  'pointerLeave',\r\n]);\r\n\r\n/**\r\n * Exports:\r\n *\r\n * - `Simulate.click(Element)`\r\n * - `Simulate.mouseMove(Element)`\r\n * - `Simulate.change(Element)`\r\n * - ... (All keys from event plugin `eventTypes` objects)\r\n */\r\nfunction makeSimulator(eventType) {\r\n  return function(domNode, eventData) {\r\n    if (React.isValidElement(domNode)) {\r\n      throw new Error(\r\n        'TestUtils.Simulate expected a DOM node as the first argument but received ' +\r\n          'a React element. Pass the DOM node you wish to simulate the event on instead. ' +\r\n          'Note that TestUtils.Simulate will not work if you are using shallow rendering.',\r\n      );\r\n    }\r\n\r\n    if (isCompositeComponent(domNode)) {\r\n      throw new Error(\r\n        'TestUtils.Simulate expected a DOM node as the first argument but received ' +\r\n          'a component instance. Pass the DOM node you wish to simulate the event on instead.',\r\n      );\r\n    }\r\n\r\n    const reactName = 'on' + eventType[0].toUpperCase() + eventType.slice(1);\r\n    const fakeNativeEvent = new Event();\r\n    fakeNativeEvent.target = domNode;\r\n    fakeNativeEvent.type = eventType.toLowerCase();\r\n\r\n    const targetInst = getInstanceFromNode(domNode);\r\n    const event = new SyntheticEvent(\r\n      reactName,\r\n      fakeNativeEvent.type,\r\n      targetInst,\r\n      fakeNativeEvent,\r\n      domNode,\r\n    );\r\n\r\n    // Since we aren't using pooling, always persist the event. This will make\r\n    // sure it's marked and won't warn when setting additional properties.\r\n    event.persist();\r\n    assign(event, eventData);\r\n\r\n    if (directDispatchEventTypes.has(eventType)) {\r\n      accumulateDirectDispatchesSingle(event);\r\n    } else {\r\n      accumulateTwoPhaseDispatchesSingle(event);\r\n    }\r\n\r\n    ReactDOM.unstable_batchedUpdates(function() {\r\n      // Normally extractEvent enqueues a state restore, but we'll just always\r\n      // do that since we're by-passing it here.\r\n      enqueueStateRestore(domNode);\r\n      executeDispatchesAndRelease(event);\r\n      rethrowCaughtError();\r\n    });\r\n    restoreStateIfNeeded();\r\n  };\r\n}\r\n\r\n// A one-time snapshot with no plans to update. We'll probably want to deprecate Simulate API.\r\nconst simulatedEventTypes = [\r\n  'blur',\r\n  'cancel',\r\n  'click',\r\n  'close',\r\n  'contextMenu',\r\n  'copy',\r\n  'cut',\r\n  'auxClick',\r\n  'doubleClick',\r\n  'dragEnd',\r\n  'dragStart',\r\n  'drop',\r\n  'focus',\r\n  'input',\r\n  'invalid',\r\n  'keyDown',\r\n  'keyPress',\r\n  'keyUp',\r\n  'mouseDown',\r\n  'mouseUp',\r\n  'paste',\r\n  'pause',\r\n  'play',\r\n  'pointerCancel',\r\n  'pointerDown',\r\n  'pointerUp',\r\n  'rateChange',\r\n  'reset',\r\n  'resize',\r\n  'seeked',\r\n  'submit',\r\n  'touchCancel',\r\n  'touchEnd',\r\n  'touchStart',\r\n  'volumeChange',\r\n  'drag',\r\n  'dragEnter',\r\n  'dragExit',\r\n  'dragLeave',\r\n  'dragOver',\r\n  'mouseMove',\r\n  'mouseOut',\r\n  'mouseOver',\r\n  'pointerMove',\r\n  'pointerOut',\r\n  'pointerOver',\r\n  'scroll',\r\n  'toggle',\r\n  'touchMove',\r\n  'wheel',\r\n  'abort',\r\n  'animationEnd',\r\n  'animationIteration',\r\n  'animationStart',\r\n  'canPlay',\r\n  'canPlayThrough',\r\n  'durationChange',\r\n  'emptied',\r\n  'encrypted',\r\n  'ended',\r\n  'error',\r\n  'gotPointerCapture',\r\n  'load',\r\n  'loadedData',\r\n  'loadedMetadata',\r\n  'loadStart',\r\n  'lostPointerCapture',\r\n  'playing',\r\n  'progress',\r\n  'seeking',\r\n  'stalled',\r\n  'suspend',\r\n  'timeUpdate',\r\n  'transitionEnd',\r\n  'waiting',\r\n  'mouseEnter',\r\n  'mouseLeave',\r\n  'pointerEnter',\r\n  'pointerLeave',\r\n  'change',\r\n  'select',\r\n  'beforeInput',\r\n  'compositionEnd',\r\n  'compositionStart',\r\n  'compositionUpdate',\r\n];\r\nfunction buildSimulators() {\r\n  simulatedEventTypes.forEach(eventType => {\r\n    Simulate[eventType] = makeSimulator(eventType);\r\n  });\r\n}\r\nbuildSimulators();\r\n\r\nexport {\r\n  renderIntoDocument,\r\n  isElement,\r\n  isElementOfType,\r\n  isDOMComponent,\r\n  isDOMComponentElement,\r\n  isCompositeComponent,\r\n  isCompositeComponentWithType,\r\n  findAllInRenderedTree,\r\n  scryRenderedDOMComponentsWithClass,\r\n  findRenderedDOMComponentWithClass,\r\n  scryRenderedDOMComponentsWithTag,\r\n  findRenderedDOMComponentWithTag,\r\n  scryRenderedComponentsWithType,\r\n  findRenderedComponentWithType,\r\n  mockComponent,\r\n  nativeTouchData,\r\n  Simulate,\r\n  act,\r\n};\r\n"],"names":["ReactSharedInternals","React","warn","format","args","printWarning","error","level","ReactDebugCurrentFrame","stack","getStackAddendum","concat","argsWithFormat","map","item","String","unshift","Function","prototype","apply","call","console","get","key","_reactInternals","FunctionComponent","ClassComponent","HostRoot","HostComponent","HostText","NoFlags","Placement","Hydrating","ReactCurrentOwner","getNearestMountedFiber","fiber","node","nearestMounted","alternate","nextNode","flags","return","tag","assertIsMounted","Error","findCurrentFiberUsingSlowPath","a","b","parentA","parentB","nextParent","child","sibling","didFindChild","stateNode","current","assign","Object","getEventCharCode","nativeEvent","charCode","keyCode","functionThatReturnsTrue","functionThatReturnsFalse","createSyntheticEvent","Interface","SyntheticBaseEvent","reactName","reactEventType","targetInst","nativeEventTarget","_reactName","_targetInst","type","target","currentTarget","propName","hasOwnProperty","normalize","defaultPrevented","returnValue","isDefaultPrevented","isPropagationStopped","preventDefault","event","stopPropagation","cancelBubble","persist","isPersistent","EventInterface","eventPhase","bubbles","cancelable","timeStamp","Date","now","isTrusted","SyntheticEvent","UIEventInterface","view","detail","SyntheticUIEvent","lastMovementX","lastMovementY","lastMouseEvent","updateMouseMovementPolyfillState","screenX","screenY","MouseEventInterface","clientX","clientY","pageX","pageY","ctrlKey","shiftKey","altKey","metaKey","getModifierState","getEventModifierState","button","buttons","relatedTarget","undefined","fromElement","srcElement","toElement","movementX","movementY","SyntheticMouseEvent","DragEventInterface","dataTransfer","SyntheticDragEvent","FocusEventInterface","SyntheticFocusEvent","AnimationEventInterface","animationName","elapsedTime","pseudoElement","SyntheticAnimationEvent","ClipboardEventInterface","clipboardData","window","SyntheticClipboardEvent","CompositionEventInterface","data","SyntheticCompositionEvent","normalizeKey","Esc","Spacebar","Left","Up","Right","Down","Del","Win","Menu","Apps","Scroll","MozPrintableKey","translateToKey","getEventKey","fromCharCode","modifierKeyToProp","Alt","Control","Meta","Shift","modifierStateGetter","keyArg","syntheticEvent","keyProp","KeyboardEventInterface","code","location","repeat","locale","which","SyntheticKeyboardEvent","PointerEventInterface","pointerId","width","height","pressure","tangentialPressure","tiltX","tiltY","twist","pointerType","isPrimary","SyntheticPointerEvent","TouchEventInterface","touches","targetTouches","changedTouches","SyntheticTouchEvent","TransitionEventInterface","propertyName","SyntheticTransitionEvent","WheelEventInterface","deltaX","wheelDeltaX","deltaY","wheelDeltaY","wheelDelta","deltaZ","deltaMode","SyntheticWheelEvent","ELEMENT_NODE","invokeGuardedCallbackProd","name","func","context","c","d","e","f","funcArgs","Array","slice","arguments","onError","invokeGuardedCallbackImpl","dispatchEvent","document","createEvent","fakeNode","createElement","invokeGuardedCallbackDev","evt","didCall","didError","windowEvent","windowEventDescriptor","getOwnPropertyDescriptor","restoreAfterDispatch","removeEventListener","evtType","callCallback","didSetError","isCrossOriginError","handleWindowError","colno","lineno","_suppressLogging","inner","addEventListener","initEvent","defineProperty","hasError","caughtError","hasRethrowError","rethrowError","reporter","invokeGuardedCallback","invokeGuardedCallbackAndCatchFirstError","clearCaughtError","rethrowCaughtError","isArrayImpl","isArray","SecretInternals","ReactDOM","EventInternals","Events","getInstanceFromNode","getNodeFromInstance","getFiberCurrentPropsFromNode","enqueueStateRestore","restoreStateIfNeeded","act","Event","suffix","hasWarnedAboutDeprecatedMockComponent","findAllInRenderedFiberTreeInternal","test","currentParent","ret","publicInst","push","validateClassInstance","inst","methodName","getInstance","received","stringified","nodeType","tagName","keys","join","renderIntoDocument","element","div","isElement","isElementOfType","convenienceConstructor","isDOMComponent","isDOMComponentElement","isCompositeComponent","render","setState","isCompositeComponentWithType","internalInstance","constructor","findAllInRenderedTree","scryRenderedDOMComponentsWithClass","root","classNames","className","getAttribute","classList","split","every","indexOf","findRenderedDOMComponentWithClass","all","length","scryRenderedDOMComponentsWithTag","toUpperCase","findRenderedDOMComponentWithTag","scryRenderedComponentsWithType","componentType","findRenderedComponentWithType","mockComponent","module","mockTagName","mockImplementation","props","children","nativeTouchData","x","y","executeDispatch","listener","executeDispatchesInOrder","dispatchListeners","_dispatchListeners","dispatchInstances","_dispatchInstances","i","executeDispatchesAndRelease","release","isInteractive","getParent","traverseTwoPhase","fn","arg","path","shouldPreventMouseEvent","disabled","getListener","registrationName","listenerAtPhase","propagationPhase","accumulateDispatches","ignoredDirection","accumulateDirectionalDispatches","phase","accumulateDirectDispatchesSingle","accumulateTwoPhaseDispatchesSingle","Simulate","directDispatchEventTypes","Set","makeSimulator","eventType","domNode","eventData","fakeNativeEvent","toLowerCase","has","simulatedEventTypes","buildSimulators","forEach"],"mappings":"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"}